(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{727:function(e,t,a){Promise.resolve().then(a.bind(a,6579))},6579:function(e,t,a){"use strict";let s,r;a.r(t),a.d(t,{default:function(){return MenuPageClient}});var i=a(7437),l=a(2265),n=a(6522),o=a(9291),c=a(1205),d=a(5340),x=a(6142),u=a(6141),m=a(8956),h=a(9764),b=a(116),p=a(6691),g=a.n(p),f=a(4033);function MenuHeader(e){let{restaurant:t,tableNumber:a,onRatingClick:s,ratingSystemEnabled:r=!0}=e,p=(0,b.useTranslations)("Common"),{scrollY:v}=(0,n.v)(),j=(0,f.useRouter)(),[w,N]=(0,l.useState)(!1),y=(0,o.H)(v,[0,500],[0,250]),F=(0,o.H)(v,[0,300],[1,0]),k=(0,o.H)(v,[0,500],[1.1,1.2]),A=(0,o.H)(v,[200,250],[0,1]),D=(0,o.H)(v,[200,250],[-20,0]),E=(null==t?void 0:t.rating)?Number(t.rating).toFixed(1):"5.0",S=(null==t?void 0:t.avgPreparationTime)||"15-20",changeLanguage=e=>{let t=window.location.pathname,a=window.location.search;t.startsWith("/tr")?t=t.replace("/tr",""):t.startsWith("/en")&&(t=t.replace("/en","")),t.startsWith("/")||(t="/"+t),j.push("/".concat(e).concat(t).concat(a).replace("//","/")),N(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"absolute top-0 left-0 right-0 h-[60vh] overflow-hidden z-0 pointer-events-none",children:(0,i.jsxs)(c.E.div,{style:{y,scale:k,opacity:F},className:"relative w-full h-full",children:[(0,i.jsx)(g(),{src:(null==t?void 0:t.coverImage)||(null==t?void 0:t.image)||"https://images.unsplash.com/photo-1514362545857-3bc165497db5?q=80&w=2670&auto=format&fit=crop",alt:"Background",fill:!0,className:"object-cover",priority:!0}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-[#050505]"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-[#050505] via-[#050505]/60 to-transparent"})]})}),(0,i.jsxs)("div",{className:"relative z-10 w-full flex flex-col items-center pt-24 pb-8 px-6 text-center",children:[(0,i.jsxs)(c.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,ease:"easeOut"},className:"relative w-24 h-24 mb-6 rounded-full p-1 shadow-[0_0_50px_rgba(255,255,255,0.1)]",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent rounded-full backdrop-blur-md border border-white/10"}),(0,i.jsx)("div",{className:"w-full h-full rounded-full overflow-hidden relative z-10",children:(0,i.jsx)(g(),{src:(null==t?void 0:t.logo)||"https://ui-avatars.com/api/?name=R&background=000&color=fff",alt:"Logo",fill:!0,className:"object-cover"})})]}),(0,i.jsx)(c.E.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.1,ease:"easeOut"},className:"text-4xl sm:text-5xl font-serif font-medium text-white mb-2 tracking-tight drop-shadow-2xl",children:null==t?void 0:t.name}),(0,i.jsxs)(c.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.2,ease:"easeOut"},className:"flex items-center gap-3 mt-4",children:[r&&(0,i.jsxs)("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 backdrop-blur-xl border border-white/10 hover:bg-amber-500/20 hover:border-amber-500/30 transition-all group",children:[(0,i.jsx)(d.Z,{className:"w-4 h-4 text-amber-500 fill-amber-500/20 group-hover:fill-amber-500 transition-colors"}),(0,i.jsx)("span",{className:"text-sm font-medium text-white",children:E})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,i.jsx)(x.Z,{className:"w-4 h-4 text-emerald-400"}),(0,i.jsxs)("span",{className:"text-sm font-medium text-white/90",children:[p("table")," ",a]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,i.jsx)(u.Z,{className:"w-4 h-4 text-blue-400"}),(0,i.jsxs)("span",{className:"text-sm font-medium text-white/90",children:[S," min"]})]})]})]}),(0,i.jsxs)(c.E.div,{style:{opacity:A,y:D},className:"fixed top-0 left-0 right-0 h-20 bg-[#050505]/80 backdrop-blur-xl border-b border-white/5 z-50 flex items-center justify-between px-6",children:[(0,i.jsx)("div",{className:"font-serif text-xl font-bold text-white tracking-wide",children:null==t?void 0:t.name}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>N(!w),className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:(0,i.jsx)(m.Z,{className:"w-5 h-5 text-white/80"})}),(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:(0,i.jsx)(h.Z,{className:"w-5 h-5 text-white/80"})})]}),w&&(0,i.jsxs)("div",{className:"absolute top-20 right-6 bg-[#1A1A1A] border border-white/10 rounded-xl overflow-hidden shadow-2xl min-w-[140px] animate-in fade-in zoom-in-95 duration-200",children:[(0,i.jsx)("button",{onClick:()=>changeLanguage("tr"),className:"w-full text-left px-5 py-3 text-white/90 hover:bg-white/5 text-sm",children:"T\xfcrk\xe7e"}),(0,i.jsx)("button",{onClick:()=>changeLanguage("en"),className:"w-full text-left px-5 py-3 text-white/90 hover:bg-white/5 text-sm",children:"English"})]})]}),(0,i.jsxs)("div",{className:"absolute top-0 right-0 p-6 z-20 flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>N(!w),className:"w-10 h-10 rounded-full bg-black/20 backdrop-blur-md flex items-center justify-center hover:bg-black/40 transition-colors border border-white/10",children:(0,i.jsx)(m.Z,{className:"w-5 h-5 text-white"})}),w&&200>v.get()&&(0,i.jsxs)("div",{className:"absolute top-20 right-6 bg-[#1A1A1A]/90 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden shadow-2xl min-w-[140px] z-[60]",children:[(0,i.jsx)("button",{onClick:()=>changeLanguage("tr"),className:"w-full text-left px-5 py-3 text-white hover:bg-white/5 text-sm",children:"T\xfcrk\xe7e"}),(0,i.jsx)("button",{onClick:()=>changeLanguage("en"),className:"w-full text-left px-5 py-3 text-white hover:bg-white/5 text-sm",children:"English"})]})]})]})}function CategoryTabs(e){var t;let{categories:a,onCategoryChange:s,activeCategory:r}=e,[n,o]=(0,l.useState)(r||(null===(t=a[0])||void 0===t?void 0:t.id)),[d,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let handleScroll=()=>{x(window.scrollY>300);let e=window.scrollY+150;for(let t=a.length-1;t>=0;t--){let s=a[t],r=document.getElementById("category-".concat(s.id));if(r&&r.offsetTop<=e){o(s.id);break}}};return window.addEventListener("scroll",handleScroll),()=>window.removeEventListener("scroll",handleScroll)},[a]),(0,l.useEffect)(()=>{r&&o(r)},[r]);let handleCategoryClick=e=>{o(e),s&&s(e);let t=document.getElementById("category-".concat(e));if(t){let e=document.body.getBoundingClientRect().top,a=t.getBoundingClientRect().top;window.scrollTo({top:a-e-100,behavior:"smooth"})}};return a&&0!==a.length?(0,i.jsx)("div",{className:"sticky top-20 z-30 transition-all duration-300 py-4 ".concat(d?"bg-[#050505]/80 backdrop-blur-xl border-b border-white/5 shadow-2xl":"bg-transparent"),children:(0,i.jsx)("div",{className:"w-full overflow-x-auto no-scrollbar px-4 sm:px-6",children:(0,i.jsx)("div",{className:"flex items-center gap-3 w-max mx-auto",children:a.map(e=>{let t=n===e.id;return(0,i.jsxs)("button",{onClick:()=>handleCategoryClick(e.id),className:"\n                                    relative px-5 py-2.5 rounded-full text-sm font-medium transition-all duration-300 whitespace-nowrap\n                                    flex items-center gap-2 group\n                                    ".concat(t?"text-white":"text-gray-400 hover:text-white bg-white/5 border border-white/5 hover:bg-white/10","\n                                "),children:[t&&(0,i.jsx)(c.E.div,{layoutId:"activeTabBackground",className:"absolute inset-0 bg-gradient-to-r from-amber-600 to-amber-700 rounded-full shadow-[0_0_20px_rgba(217,119,6,0.4)]",transition:{type:"spring",bounce:.2,duration:.6}}),(0,i.jsx)("span",{className:"relative z-10 font-serif tracking-wide",children:e.name}),e.items&&e.items.length>0&&(0,i.jsx)("span",{className:"\n                                        relative z-10 text-[10px] px-1.5 py-0.5 rounded-md font-bold\n                                        ".concat(t?"bg-black/20 text-white/90":"bg-black/20 text-gray-500 group-hover:text-gray-300","\n                                    "),children:e.items.length})]},e.id)})})})}):null}var v=a(8438),j=a(9883);function ProductCard(e){let{item:t,onClick:a}=e,s=(0,b.useTranslations)("Product"),[r,n]=(0,l.useState)(!1),o=t.image&&!r;return(0,i.jsxs)(c.E.div,{onClick:a,className:"h-full cursor-pointer group relative",initial:{opacity:0,y:30},animate:{opacity:1,y:0},whileHover:{y:-8},transition:{type:"spring",stiffness:200,damping:20},children:[(0,i.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-amber-500/20 to-emerald-500/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-70 transition-opacity duration-700"}),(0,i.jsxs)("div",{className:"relative h-full flex flex-col overflow-hidden rounded-2xl border border-white/5 bg-white/[0.03] backdrop-blur-xl shadow-2xl ring-1 ring-white/10 transition-all duration-300 group-hover:bg-white/[0.06] group-hover:border-white/10 group-hover:shadow-[0_20px_40px_-15px_rgba(0,0,0,0.5)]",children:[(0,i.jsxs)("div",{className:"relative aspect-[4/3] w-full overflow-hidden",children:[o?(0,i.jsxs)("div",{className:"w-full h-full relative",children:[(0,i.jsx)("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transition-transform duration-1000 ease-out group-hover:scale-110",onError:()=>n(!0)}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-[#050505] via-transparent to-transparent opacity-80"})]}):(0,i.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center gap-3 bg-gradient-to-br from-gray-800 to-black",children:(0,i.jsx)(v.Z,{className:"w-8 h-8 text-white/10"})}),(0,i.jsx)("div",{className:"absolute top-3 right-3 z-10",children:(0,i.jsxs)("div",{className:"px-3 py-1.5 rounded-lg bg-black/60 backdrop-blur-md border border-white/10 shadow-lg flex items-center gap-1 group-hover:border-amber-500/30 transition-colors",children:[(0,i.jsx)("span",{className:"text-amber-500 font-bold text-sm tracking-wide",children:"₺"}),(0,i.jsx)("span",{className:"text-white font-bold text-lg tracking-tight",children:t.price})]})})]}),(0,i.jsxs)("div",{className:"p-5 flex-1 flex flex-col relative",children:[(0,i.jsx)("h3",{className:"font-serif font-bold text-xl text-white mb-2 leading-tight group-hover:text-amber-400 transition-colors duration-300 drop-shadow-sm",children:t.name}),t.description&&(0,i.jsx)("p",{className:"text-sm text-gray-400 line-clamp-2 leading-relaxed font-light mb-4 group-hover:text-gray-300 transition-colors",children:t.description}),(0,i.jsxs)("div",{className:"mt-auto flex items-center justify-between pt-2 border-t border-white/5",children:[t.extras&&t.extras.length>0?(0,i.jsx)("span",{className:"text-[10px] uppercase font-bold tracking-widest text-emerald-400/80 bg-emerald-400/10 px-2 py-1 rounded-md border border-emerald-400/20",children:s("options",{count:t.extras.length})}):(0,i.jsx)("div",{}),(0,i.jsx)(c.E.button,{whileTap:{scale:.9},className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-orange-600 text-white flex items-center justify-center shadow-lg shadow-amber-900/30 group-hover:shadow-amber-500/40 opacity-90 group-hover:opacity-100 transition-all",children:(0,i.jsx)(j.Z,{className:"w-5 h-5"})})]})]})]})]})}var w=a(8868);function CategorySection(e){var t;let{category:a,onProductClick:s,isListView:r}=e,n=(0,l.useRef)(null),o=(0,w.Y)(n,{once:!0,amount:.1});return(0,i.jsxs)("div",{ref:n,id:"category-".concat(a.id),className:"mb-24 scroll-mt-40",children:[(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:o?{opacity:1,y:0}:{opacity:0,y:20},transition:{duration:.6},className:"flex items-center gap-6 mb-10 px-4",children:[(0,i.jsx)("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-transparent via-amber-500/40 to-transparent"}),(0,i.jsx)("h2",{className:"text-3xl md:text-4xl font-serif font-medium text-[#FAF7F2] tracking-wide text-center drop-shadow-xl",children:a.name}),(0,i.jsx)("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-transparent via-amber-500/40 to-transparent"})]}),(0,i.jsx)("div",{className:"grid gap-x-4 gap-y-10 px-4 transition-all duration-500 ".concat(r?"grid-cols-1 max-w-xl mx-auto":"grid-cols-2 lg:grid-cols-3"),children:null===(t=a.items)||void 0===t?void 0:t.map((e,t)=>(0,i.jsx)(c.E.div,{initial:{opacity:0,scale:.95},animate:o?{opacity:1,scale:1}:{opacity:0,scale:.95},transition:{duration:.5,delay:.05*t},children:(0,i.jsx)(ProductCard,{item:e,onClick:()=>s(e)})},e.id))})]})}function ProductGrid(e){let{categories:t,onProductClick:a,isListView:s}=e;return t&&0!==t.length?(0,i.jsx)("div",{className:"container max-w-screen-xl mx-auto pb-24",children:t.map(e=>(0,i.jsx)(CategorySection,{category:e,onProductClick:a,isListView:s},e.id))}):null}var N=a(2167),y=a(2549),F=a(4891),k=a(2442),A=a(7087);function ProductCustomizer(e){let{product:t,isOpen:a,onClose:s}=e,r=(0,b.useTranslations)("Product"),{addToCart:n}=(0,A.useCart)(),[o,d]=(0,l.useState)({removedIngredients:[],addedExtras:[],specialNotes:""}),[x,u]=(0,l.useState)(0);if((0,l.useEffect)(()=>{t&&(u(t.price),d({removedIngredients:[],addedExtras:[],specialNotes:""}))},[t]),(0,l.useEffect)(()=>{if(t){let e=t.price;o.addedExtras.forEach(a=>{var s;let r=null===(s=t.extras)||void 0===s?void 0:s.find(e=>e.id===a);r&&(e+=r.price)}),u(e)}},[o,t]),!t)return null;let toggleIngredient=(e,t)=>{t&&d(t=>({...t,removedIngredients:t.removedIngredients.includes(e)?t.removedIngredients.filter(t=>t!==e):[...t.removedIngredients,e]}))},toggleExtra=e=>{d(t=>({...t,addedExtras:t.addedExtras.includes(e)?t.addedExtras.filter(t=>t!==e):[...t.addedExtras,e]}))};return(0,i.jsx)(N.M,{children:a&&(0,i.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center",children:[(0,i.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/80 backdrop-blur-xl",onClick:s}),(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full sm:max-w-xl bg-[#1A1A1A] border border-[#FAF7F2]/10 sm:rounded-3xl rounded-t-3xl overflow-hidden flex flex-col max-h-[90vh] sm:max-h-[85vh] shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"p-6 border-b border-[#FAF7F2]/5 bg-[#1A1A1A]/95 relative",children:[(0,i.jsx)("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] mix-blend-overlay"}),(0,i.jsxs)("div",{className:"flex justify-between items-start gap-4 relatie z-10",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h2",{className:"text-3xl font-serif font-black text-[#FAF7F2] mb-1 leading-tight",children:t.name}),(0,i.jsx)("p",{className:"text-sm text-[#FAF7F2]/60 font-light font-sans line-clamp-2",children:t.description})]}),(0,i.jsx)("button",{onClick:s,className:"p-2 bg-[#FAF7F2]/5 hover:bg-[#FAF7F2]/10 rounded-full transition-colors border border-[#FAF7F2]/5",children:(0,i.jsx)(y.Z,{className:"w-5 h-5 text-[#FAF7F2]/60 hover:text-[#FAF7F2]"})})]})]}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-6 custom-scroll bg-[#1A1A1A] relative",children:[t.ingredients&&t.ingredients.length>0&&(0,i.jsxs)("section",{className:"mb-8",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)("h3",{className:"text-xs font-bold text-[#D97706] uppercase tracking-[0.2em] font-sans",children:r("ingredients")}),(0,i.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-[#D97706]/30 to-transparent"})]}),(0,i.jsx)("div",{className:"space-y-2",children:t.ingredients.map(e=>{let t=o.removedIngredients.includes(e.id);return(0,i.jsx)("div",{onClick:()=>toggleIngredient(e.id,e.isRemovable),className:"p-4 rounded-xl border transition-all duration-300 ".concat(t?"bg-red-900/10 border-red-900/30 opacity-60":"bg-[#FAF7F2]/5 border-[#FAF7F2]/5 hover:border-[#D97706]/30"," ").concat(e.isRemovable?"cursor-pointer hover:bg-[#FAF7F2]/10":"cursor-not-allowed opacity-80"),children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-base font-sans ".concat(t?"line-through text-red-300":"text-[#FAF7F2]"),children:e.name}),e.isRemovable?(0,i.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center transition-colors ".concat(t?"bg-red-500/20 text-red-300":"bg-[#FAF7F2]/10 text-[#FAF7F2]/40"),children:t?(0,i.jsx)(F.Z,{className:"w-3.5 h-3.5"}):(0,i.jsx)(k.Z,{className:"w-3.5 h-3.5"})}):(0,i.jsx)("span",{className:"text-[10px] text-[#FAF7F2]/30 uppercase font-black tracking-wider",children:r("mandatory")})]})},e.id)})})]}),t.extras&&t.extras.length>0&&(0,i.jsxs)("section",{className:"mb-8",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)("h3",{className:"text-xs font-bold text-[#D97706] uppercase tracking-[0.2em] font-sans",children:r("addExtras")}),(0,i.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-[#D97706]/30 to-transparent"})]}),(0,i.jsx)("div",{className:"space-y-2",children:t.extras.map(e=>{let t=o.addedExtras.includes(e.id);return(0,i.jsx)("div",{onClick:()=>toggleExtra(e.id),className:"p-4 rounded-xl border cursor-pointer transition-all duration-300 ".concat(t?"bg-[#D97706]/10 border-[#D97706] shadow-[0_0_15px_rgba(217,119,6,0.1)]":"bg-[#FAF7F2]/5 border-[#FAF7F2]/5 hover:border-[#D97706]/30 hover:bg-[#FAF7F2]/10"),children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-base font-sans ".concat(t?"text-[#D97706] font-bold":"text-[#FAF7F2]"),children:e.name}),(0,i.jsxs)("span",{className:"text-base font-serif font-bold ".concat(t?"text-[#D97706]":"text-[#FAF7F2]/60"),children:["+₺",e.price]})]})},e.id)})})]}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)("h3",{className:"text-xs font-bold text-[#D97706] uppercase tracking-[0.2em] font-sans",children:r("specialNotes")}),(0,i.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-[#D97706]/30 to-transparent"})]}),(0,i.jsx)("textarea",{value:o.specialNotes,onChange:e=>d(t=>({...t,specialNotes:e.target.value})),placeholder:r("specialNotesPlaceholder"),maxLength:500,className:"w-full p-4 bg-[#FAF7F2]/5 border border-[#FAF7F2]/10 rounded-xl text-sm text-[#FAF7F2] placeholder-[#FAF7F2]/30 focus:border-[#D97706]/50 focus:ring-1 focus:ring-[#D97706]/50 outline-none transition-all resize-none min-h-[100px]"}),(0,i.jsx)("div",{className:"mt-2 text-right",children:(0,i.jsxs)("span",{className:"text-xs text-[#FAF7F2]/40",children:[o.specialNotes.length,"/500"]})})]})]}),(0,i.jsxs)("div",{className:"p-6 pt-4 border-t border-[#FAF7F2]/10 bg-[#1A1A1A] relative z-10",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-[#FAF7F2]/40 uppercase tracking-widest mb-1 font-bold",children:r("total")}),(0,i.jsxs)("p",{className:"text-4xl font-serif font-bold text-[#D97706] tracking-tight",children:["₺",(x||0).toFixed(2)]})]})}),(0,i.jsxs)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var e,a;let r=(null===(e=t.ingredients)||void 0===e?void 0:e.filter(e=>o.removedIngredients.includes(e.id)&&e.isRemovable).map(e=>"".concat(e.name," (-)")))||[],i=(null===(a=t.extras)||void 0===a?void 0:a.filter(e=>o.addedExtras.includes(e.id)).map(e=>e.name))||[],l=[...r,...i];n({productId:t.id,name:t.name,price:x,quantity:1,image:t.image,options:l,note:o.specialNotes}),s()},className:"w-full h-14 rounded-xl font-bold text-white shadow-lg flex items-center justify-center gap-3 transition-all relative overflow-hidden group",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-[#D97706] to-amber-600 transition-all group-hover:brightness-110"}),(0,i.jsx)(j.Z,{className:"w-5 h-5 relative z-10"}),(0,i.jsx)("span",{className:"text-lg relative z-10 tracking-wide font-sans",children:r("addToOrder")})]})]})]})]})})}var D=a(7980);function LoadingSpinner(){return(0,i.jsxs)("div",{className:"fixed inset-0 bg-black flex flex-col items-center justify-center z-[100] bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-900 via-black to-black",children:[(0,i.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,i.jsx)("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-orange-500/10 rounded-full blur-[100px] animate-pulse"}),(0,i.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-red-500/10 rounded-full blur-[100px] animate-pulse delay-1000"})]}),(0,i.jsxs)("div",{className:"relative flex flex-col items-center gap-8",children:[(0,i.jsxs)("div",{className:"relative w-32 h-32 glass-card flex items-center justify-center animate-float",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-orange-500/20 to-red-500/20 rounded-2xl blur-xl"}),(0,i.jsxs)("div",{className:"relative z-10 text-4xl animate-spin-slow",children:[(0,i.jsx)("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2",children:"\uD83E\uDD50"}),(0,i.jsx)("span",{className:"absolute top-1/2 -right-8 -translate-y-1/2",children:"\uD83E\uDD69"}),(0,i.jsx)("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2",children:"☕"}),(0,i.jsx)("span",{className:"absolute top-1/2 -left-8 -translate-y-1/2",children:"\uD83E\uDD59"})]}),(0,i.jsx)("div",{className:"z-20 p-4 bg-black/50 rounded-full backdrop-blur-md border border-white/10",children:(0,i.jsx)(D.Z,{className:"w-8 h-8 text-white"})}),(0,i.jsx)("div",{className:"absolute inset-0 rounded-2xl border border-white/5"}),(0,i.jsx)("div",{className:"absolute -inset-2 rounded-3xl border border-orange-500/30 animate-spin",style:{animationDuration:"4s"}})]}),(0,i.jsxs)("div",{className:"space-y-3 text-center z-10",children:[(0,i.jsx)("h1",{className:"text-4xl font-black tracking-widest bg-gradient-to-r from-orange-400 via-red-500 to-purple-600 bg-clip-text text-transparent animate-pulse filter drop-shadow-lg",children:"ADISTOW"}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 text-white/40 text-sm font-medium tracking-wide uppercase",children:[(0,i.jsx)("div",{className:"w-2 h-2 rounded-full bg-orange-500 animate-bounce"}),(0,i.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-bounce delay-100"}),(0,i.jsx)("div",{className:"w-2 h-2 rounded-full bg-purple-500 animate-bounce delay-200"}),(0,i.jsx)("span",{children:"Lezzet Y\xfckleniyor"})]})]})]})]})}var E=a(1981),S=a(1250),C=a(1016),I=a(5713),z=a(2707);function useGeofence(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,[a,s]=(0,l.useState)(null),[r,i]=(0,l.useState)(null),[n,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(null),[x,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(!1),checkLocation=()=>{if(!navigator.geolocation){o("Tarayıcınız konum servisini desteklemiyor."),d("BROWSER_NOT_SUPPORTED"),s(!1);return}h(!0),o(null),d(null),navigator.geolocation.getCurrentPosition(a=>{let r={latitude:a.coords.latitude,longitude:a.coords.longitude};if(!e){s(!0),h(!1);return}let l=(0,z.getDistance)(r,e);i(l),l<=t?(s(!0),o(null),d(null)):(s(!1),o("Restorandan \xe7ok uzaktasınız (".concat(l,"m). Sipariş vermek i\xe7in restoranda olmalısınız.")),d("TOO_FAR")),h(!1)},e=>{h(!1),s(!1),1===e.code?(o("Konum izni reddedildi. Tarayıcı ayarlarından konum iznini a\xe7ın."),d("PERMISSION_DENIED")):2===e.code?(o("Konum servisleri kapalı. L\xfctfen cihazınızın konum ayarlarını a\xe7ın."),d("LOCATION_DISABLED")):(3===e.code?o("Konum alınırken zaman aşımı. Tekrar deneyin."):o("Konum alınamadı. L\xfctfen konum ayarlarınızı kontrol edin."),d("POSITION_UNAVAILABLE"))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},requestPermission=async()=>new Promise(e=>{if(!navigator.geolocation){o("Tarayıcınız konum servisini desteklemiyor."),d("BROWSER_NOT_SUPPORTED"),e(!1);return}navigator.geolocation.getCurrentPosition(()=>{localStorage.setItem("locationPermissionAsked","true"),localStorage.setItem("locationPermissionGranted","true"),checkLocation(),e(!0)},t=>{localStorage.setItem("locationPermissionAsked","true"),localStorage.setItem("locationPermissionGranted","false"),1===t.code?(o("Konum izni reddedildi."),d("PERMISSION_DENIED")):2===t.code&&(o("Konum servisleri kapalı. L\xfctfen cihazınızın konum ayarlarını a\xe7ın."),d("LOCATION_DISABLED")),e(!1)},{enableHighAccuracy:!0,timeout:1e4})}),b="true"===localStorage.getItem("locationPermissionAsked");return(0,l.useEffect)(()=>{checkLocation(),navigator.permissions&&navigator.permissions.query&&navigator.permissions.query({name:"geolocation"}).then(e=>{u(e.state),e.onchange=()=>{u(e.state),checkLocation()}});let e=setInterval(()=>{"granted"===x&&checkLocation()},3e4);return()=>clearInterval(e)},[e]),{isWithinRange:a,distance:r,error:n,errorType:c,isChecking:m,checkLocation,permissionStatus:x,requestPermission,hasAskedPermission:b}}var P=a(994),_=a(6889),T=a(4086),R=a(5813);try{s=(0,P.C6)().length>0?(0,P.Mq)():(0,P.ZF)({apiKey:"AIzaSyB-mPq-8Xy7X_p-l-0X-y-X-p-l-0X-",authDomain:"restoqr-admin-app.firebaseapp.com",projectId:"restoqr-admin-app",storageBucket:"restoqr-admin-app.appspot.com",messagingSenderId:"1026049280142",appId:"1:1026049280142:web:7a8b9c0d1e2f3g4h5i6j7k"}),(0,_.v0)(s),r=(0,T.ad)(s),(0,R.cF)(s)}catch(e){console.error("Firebase initialization failed:",e)}var O=a(3095),Z=a(2894),L=a(2682),M=a(2845),q=a(1271),B=a(5925);function LocationPermissionModal(e){let{isOpen:t,onClose:a,onPermissionGranted:s,onPermissionDenied:r,errorType:n,distance:o}=e,d=(0,b.useTranslations)("Permission"),[x,u]=(0,l.useState)(!1),[m,h]=(0,l.useState)(!1),handleRequestPermission=async()=>{if("PERMISSION_DENIED"===n){h(!0);return}if(u(!0),!navigator.geolocation){B.default.error(d("browserUnsupported")),r(),u(!1);return}try{navigator.geolocation.getCurrentPosition(e=>{localStorage.setItem("locationPermissionAsked","true"),localStorage.setItem("locationPermissionGranted","true"),B.default.success(d("permissionGranted")),u(!1),s(),a()},e=>{u(!1),localStorage.setItem("locationPermissionAsked","true"),localStorage.setItem("locationPermissionGranted","false"),1===e.code?(B.default.error(d("permissionDeniedToast")),h(!0)):2===e.code?B.default.error(d("locationServicesOff")):3===e.code&&B.default.error(d("locationFetchError")),r()},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})}catch(e){console.error("Permission error:",e),B.default.error(d("errorGeneric")),u(!1),r()}},p=(()=>{switch(n){case"LOCATION_DISABLED":return{icon:O.Z,iconColor:"text-orange-500",iconBg:"bg-orange-500/10",iconGlow:"bg-orange-500",title:d("locationDisabledTitle"),description:d("locationDisabledDesc"),actionText:d("understand"),isWarning:!0};case"TOO_FAR":return{icon:Z.Z,iconColor:"text-red-500",iconBg:"bg-red-500/10",iconGlow:"bg-red-500",title:d("tooFarTitle"),description:o?d("tooFarDesc",{distance:o}):d("tooFarDescSimple"),actionText:d("checkAgain"),isWarning:!0};case"PERMISSION_DENIED":return{icon:O.Z,iconColor:"text-red-500",iconBg:"bg-red-500/10",iconGlow:"bg-red-500",title:d("permissionDeniedTitle"),description:d("permissionDeniedDesc"),actionText:m?d("ok"):d("howToAllow"),isWarning:!0};default:return{icon:L.Z,iconColor:"text-[#00cca3]",iconBg:"bg-[#00cca3]/10",iconGlow:"bg-[#00cca3]",title:d("verifyTitle"),description:d("verifyDesc"),actionText:d("allow"),isWarning:!1}}})(),g=p.icon;return(0,i.jsx)(N.M,{children:t&&(0,i.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,i.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"absolute inset-0 bg-black/80 backdrop-blur-md"}),(0,i.jsxs)(c.E.div,{initial:{scale:.8,opacity:0,y:40},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:40},transition:{type:"spring",damping:20},className:"relative z-10 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,i.jsx)("div",{className:"absolute -inset-1 ".concat(p.iconGlow," blur-2xl opacity-20 rounded-2xl")}),(0,i.jsxs)("div",{className:"relative bg-gradient-to-br from-zinc-900 to-black border border-white/10 rounded-2xl p-8 shadow-2xl",children:[(0,i.jsx)("button",{onClick:a,className:"absolute top-4 right-4 w-10 h-10 flex items-center justify-center rounded-full bg-white/5 hover:bg-white/10 transition-all hover:rotate-90 duration-300",children:(0,i.jsx)(y.Z,{className:"w-5 h-5 text-zinc-400"})}),(0,i.jsxs)("div",{className:"w-20 h-20 ".concat(p.iconBg," rounded-2xl flex items-center justify-center mx-auto mb-6 relative group"),children:[(0,i.jsx)("div",{className:"absolute inset-0 ".concat(p.iconGlow," blur-xl opacity-40 animate-pulse")}),(0,i.jsx)(g,{className:"w-10 h-10 ".concat(p.iconColor," relative")})]}),(0,i.jsx)("h2",{className:"text-2xl font-black text-white text-center mb-3 tracking-tight",children:p.title}),(0,i.jsx)("p",{className:"text-zinc-400 text-center mb-8 leading-relaxed text-sm",children:p.description}),m&&"PERMISSION_DENIED"===n&&(0,i.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,i.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:(0,i.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,i.jsx)(M.Z,{className:"w-5 h-5 text-red-400 shrink-0 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-white font-bold text-sm mb-1",children:d("instructions.chromeTitle")}),(0,i.jsxs)("ol",{className:"text-xs text-zinc-300 space-y-1 list-decimal list-inside",children:[(0,i.jsx)("li",{children:d("instructions.chromeStep1")}),(0,i.jsx)("li",{children:d("instructions.chromeStep2")}),(0,i.jsx)("li",{children:d("instructions.chromeStep3")}),(0,i.jsx)("li",{children:d("instructions.chromeStep4")})]})]})]})}),(0,i.jsx)("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-xl p-4",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(q.Z,{className:"w-5 h-5 text-orange-400 shrink-0 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-white font-bold text-sm mb-1",children:d("instructions.mobileTitle")}),(0,i.jsxs)("ol",{className:"text-xs text-zinc-300 space-y-1 list-decimal list-inside",children:[(0,i.jsx)("li",{children:d("instructions.mobileStep1")}),(0,i.jsx)("li",{children:d("instructions.mobileStep2")}),(0,i.jsx)("li",{children:d("instructions.mobileStep3")})]})]})]})}),(0,i.jsx)("div",{className:"text-center pt-2",children:(0,i.jsxs)("div",{className:"text-xs text-zinc-500",children:["⚠️ ",d("instructions.refreshNote")]})})]}),!p.isWarning&&!m&&(0,i.jsx)("div",{className:"space-y-3 mb-8",children:[{icon:k.Z,text:d("safeOrder")},{icon:k.Z,text:d("callWaiter")},{icon:k.Z,text:d("requestBill")}].map((e,t)=>(0,i.jsxs)(c.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl border border-white/5 hover:bg-white/10 transition-all",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-[#00cca3]/20 rounded-full flex items-center justify-center shrink-0",children:(0,i.jsx)(e.icon,{className:"w-4 h-4 text-[#00cca3]"})}),(0,i.jsx)("span",{className:"text-sm text-zinc-300 font-medium",children:e.text})]},t))}),p.isWarning&&"TOO_FAR"===n&&(0,i.jsx)("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl",children:(0,i.jsxs)("p",{className:"text-red-400 text-xs text-center",children:["\uD83D\uDD12 ",d("safetyWarning")]})}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:a,className:"flex-1 px-6 py-3.5 rounded-xl bg-white/5 text-zinc-300 font-bold hover:bg-white/10 transition-all border border-white/10",children:d("close")}),(0,i.jsx)("button",{onClick:handleRequestPermission,disabled:x,className:"flex-1 px-6 py-3.5 rounded-xl font-bold transition-all shadow-lg disabled:opacity-50 ".concat(p.isWarning?"bg-orange-500 hover:bg-orange-600 text-white shadow-orange-500/30":"bg-gradient-to-r from-[#00cca3] to-[#00b894] hover:from-[#00b894] hover:to-[#00cca3] text-black shadow-[#00cca3]/40"),children:x?(0,i.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,i.jsx)(c.E.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),d("checking")]}):p.actionText})]}),(0,i.jsxs)("p",{className:"text-xs text-zinc-600 text-center mt-6 leading-relaxed",children:["\uD83D\uDD12 ",d("privacyNote")]})]})]})]})})}async function triggerNotification(e){let{restaurantId:t,tableId:a,type:s,title:i,body:l}=e;try{let e=(0,T.hJ)(r,"restaurants",t,"notifications");await (0,T.ET)(e,{type:s,tableId:a,title:i,body:l,status:"new",createdAt:(0,T.Bt)(),deleteAt:(()=>{let e=new Date(Date.now()+1296e6);return e.setHours(6,0,0,0),e})(),isRead:!1}),console.log("Notification created in Firestore: ".concat(s," for Table ").concat(a,". Cloud Function will handle FCM."))}catch(e){console.error("Error triggering notification:",e)}}function ServiceButtons(e){let{restaurantId:t,tableId:a,tableName:s,location:n,waiterCallEnabled:o=!0,coalRequestEnabled:d=!1}=e,x=(0,b.useTranslations)("Service"),u=(0,b.useTranslations)("Cart"),{isWithinRange:m,error:h,errorType:p,distance:g,checkLocation:f,hasAskedPermission:v,requestPermission:j}=useGeofence(n),[w,N]=(0,l.useState)(null),[y,F]=(0,l.useState)(!1),[k,A]=(0,l.useState)(null),[D,z]=(0,l.useState)(0),[P,_]=(0,l.useState)(0);(0,l.useEffect)(()=>{let e=setInterval(()=>{let e=Math.max(0,Math.ceil((D-Date.now())/1e3));_(e)},100);return()=>clearInterval(e)},[D]);let handleRequest=async e=>{if(P>0){B.default.error(x("cooldown",{seconds:P}));return}if(!v){A(e),F(!0);return}if(!1===m){B.default.error(h||u("locationErrorDesc"));return}N(e);try{let i=(0,T.JU)(r,"restaurants",t,"tables",a),l="waiter"===e?"Garson \xc7ağırıyor":"coal"===e?"K\xf6z İstiyor":"Hesap İstiyor";await (0,T.r7)(i,{requests:(0,T.vr)({type:e,timestamp:Date.now(),status:"pending",message:l})}),await triggerNotification({restaurantId:t,tableId:a,type:e,title:"".concat(s),body:"".concat(s," ").concat(l)}),z(Date.now()+3e4);let n="";"waiter"===e?n=x("waiterSent"):"coal"===e?n=x("coalSent"):"bill"===e&&(n=x("billSent")),B.default.success(n,{icon:"waiter"===e?"\uD83D\uDECE️":"coal"===e?"\uD83D\uDD25":"\uD83D\uDCB3",style:{background:"#1A1A1A",color:"#FAF7F2",border:"1px solid #D97706"}})}catch(e){console.error("Request error:",e),B.default.error(u("orderError"))}finally{N(null)}},R=!1===m;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(LocationPermissionModal,{isOpen:y,onClose:()=>F(!1),onPermissionGranted:()=>{k&&(handleRequest(k),A(null))},onPermissionDenied:()=>{A(null),B.default.error(x("locationError"))},errorType:p,distance:g}),(0,i.jsxs)("div",{className:"fixed bottom-36 right-6 z-30 flex flex-col gap-4",children:[R&&(0,i.jsxs)(c.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:()=>{v&&"PERMISSION_DENIED"!==p&&"LOCATION_DISABLED"!==p?f():F(!0)},className:"absolute bottom-0 right-20 mb-[-1rem] mr-[-1rem] bg-[#1A1A1A] rounded-2xl border border-red-500/50 p-4 shadow-2xl w-48 text-center",children:[(0,i.jsx)(E.Z,{className:"w-8 h-8 text-red-500 mx-auto mb-2 animate-pulse"}),(0,i.jsx)("div",{className:"text-[#FAF7F2] font-bold text-xs mb-1",children:u("locationError")}),(0,i.jsx)("div",{className:"text-red-400 text-[10px] mb-2",children:u("locationErrorDesc")}),(0,i.jsx)("button",{className:"bg-red-500 text-white text-[10px] font-bold px-3 py-1.5 rounded-full w-full",children:"FIX"})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[o&&(0,i.jsxs)(c.E.button,{onClick:()=>handleRequest("waiter"),disabled:"waiter"===w||P>0||R,whileHover:{scale:P>0||R?1:1.1},whileTap:{scale:.9},className:"w-14 h-14 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 relative group ".concat(P>0||R?"bg-[#1A1A1A] border border-[#FAF7F2]/10 opacity-50 cursor-not-allowed":"bg-[#1A1A1A] border border-[#D97706]/30 hover:border-[#D97706] hover:bg-[#FAF7F2]/5"),children:[(0,i.jsx)("div",{className:"absolute inset-0 rounded-full bg-[#D97706]/5 blur-md opacity-0 group-hover:opacity-100 transition-opacity"}),P>0?(0,i.jsxs)("span",{className:"text-xs font-bold text-[#FAF7F2]",children:[P,"s"]}):(0,i.jsx)(S.Z,{className:"w-6 h-6 text-[#D97706]"})]}),d&&(0,i.jsxs)(c.E.button,{onClick:()=>handleRequest("coal"),disabled:"coal"===w||P>0||R,whileHover:{scale:P>0||R?1:1.1},whileTap:{scale:.9},className:"w-14 h-14 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 relative group ".concat(P>0||R?"bg-[#1A1A1A] border border-[#FAF7F2]/10 opacity-50 cursor-not-allowed":"bg-[#1A1A1A] border border-[#EA580C]/30 hover:border-[#EA580C] hover:bg-[#FAF7F2]/5"),children:[(0,i.jsx)("div",{className:"absolute inset-0 rounded-full bg-[#EA580C]/5 blur-md opacity-0 group-hover:opacity-100 transition-opacity"}),P>0?(0,i.jsxs)("span",{className:"text-xs font-bold text-[#FAF7F2]",children:[P,"s"]}):(0,i.jsx)(C.Z,{className:"w-6 h-6 text-[#EA580C]"})]}),(0,i.jsxs)(c.E.button,{onClick:()=>handleRequest("bill"),disabled:"bill"===w||P>0||R,whileHover:{scale:P>0||R?1:1.1},whileTap:{scale:.9},className:"w-14 h-14 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 relative group ".concat(P>0||R?"bg-[#1A1A1A] border border-[#FAF7F2]/10 opacity-50 cursor-not-allowed":"bg-[#1A1A1A] border border-[#FAF7F2]/20 hover:border-[#FAF7F2]/50 hover:bg-[#FAF7F2]/5"),children:[(0,i.jsx)("div",{className:"absolute inset-0 rounded-full bg-[#FAF7F2]/5 blur-md opacity-0 group-hover:opacity-100 transition-opacity"}),P>0?(0,i.jsxs)("span",{className:"text-xs font-bold text-[#FAF7F2]",children:[P,"s"]}):(0,i.jsx)(I.Z,{className:"w-6 h-6 text-[#FAF7F2]"})]})]})]})]})}var G=a(6712),H=a(8291),J=a(5367);async function trackScan(e){if(e)try{let t=(0,T.JU)(r,"restaurants",e,"analytics","stats");await (0,T.r7)(t,{totalScans:(0,T.nP)(1)}).catch(async e=>{"not-found"===e.code&&await (0,T.pl)(t,{totalScans:1,totalViews:0,totalRevenue:0,popularProduct:"",customizationRate:0,hourlyActivity:Array(24).fill(0).map((e,t)=>({time:"".concat(t,":00"),scans:0,views:0}))},{merge:!0})})}catch(e){console.error("Failed to track scan:",e)}}async function trackView(e){if(e)try{let t=(0,T.JU)(r,"restaurants",e,"analytics","stats");new Date().getHours(),await (0,T.r7)(t,{totalViews:(0,T.nP)(1)})}catch(e){console.error("Failed to track view:",e)}}async function trackRevenue(e,t){if(e&&t)try{let a=(0,T.JU)(r,"restaurants",e,"analytics","stats");await (0,T.r7)(a,{totalRevenue:(0,T.nP)(t)})}catch(e){console.error("Failed to track revenue:",e)}}function CartButton(e){let{restaurantId:t,tableId:a,tableName:s,location:n,onOrderSuccess:o}=e,d=(0,b.useTranslations)("Cart"),{itemCount:u,total:m,items:h,removeFromCart:p,updateQuantity:g,clearCart:f,cartNote:v,setCartNote:w}=(0,A.useCart)(),{isWithinRange:k,error:D,errorType:E,distance:S,checkLocation:C,hasAskedPermission:I,requestPermission:z}=useGeofence(n),[P,_]=(0,l.useState)(!1),[R,O]=(0,l.useState)(!1),[Z,L]=(0,l.useState)(!1),handleCheckout=async()=>{if(!I){L(!0);return}if(!k){B.default.error(D||d("locationErrorDesc"),{style:{background:"#1A1A1A",color:"#FAF7F2",border:"1px solid #dc2626"}}),L(!0);return}if(0!==h.length){O(!0);try{let e=(0,T.hJ)(r,"restaurants",t,"orders"),i=(0,T.hJ)(r,"restaurants",t,"tables"),l=(0,T.JU)(i,a),n={tableId:a,tableName:s,items:h.map(e=>({id:e.productId,name:e.name,price:e.price,quantity:e.quantity,notes:e.note||"",extras:e.options||[]})),status:"pending",total:m,timestamp:T.EK.now(),deleteAt:(()=>{let e=new Date(Date.now()+1296e6);return e.setHours(6,0,0,0),e})(),note:v||""},c=await (0,T.ET)(e,n);await (0,T.r7)(l,{activeOrders:(0,T.vr)(c.id),orders:(0,T.vr)(...n.items),totalAmount:(0,T.nP)(m),status:"ordering",lastOrderTime:T.EK.now()}),await triggerNotification({restaurantId:t,tableId:a,type:"order",title:"".concat(s),body:"".concat(s,": Yeni Sipariş (₺").concat(m,")")}),await trackRevenue(t,m),f(),_(!1),B.default.success(d("orderSent"),{icon:"\uD83E\uDD42",style:{background:"#1A1A1A",color:"#FAF7F2",border:"1px solid #D97706"}}),o&&setTimeout(o,1500)}catch(e){console.error("Checkout error:",e),B.default.error(d("orderError"))}finally{O(!1)}}};return 0===u?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(LocationPermissionModal,{isOpen:Z,onClose:()=>L(!1),onPermissionGranted:()=>{L(!1),C(),setTimeout(()=>{k&&handleCheckout()},500)},onPermissionDenied:()=>{L(!1),B.default.error(d("permissionDenied"))},errorType:E,distance:S}),(0,i.jsxs)(c.E.button,{initial:{scale:0,y:100},animate:{scale:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.95},onClick:()=>_(!0),className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-[#1A1A1A]/95 border border-[#D97706]/30 text-[#FAF7F2] px-6 py-4 rounded-2xl shadow-[0_10px_40px_rgba(0,0,0,0.6)] flex items-center gap-5 w-[92%] max-w-sm justify-between backdrop-blur-xl ring-1 ring-white/5",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"bg-[#D97706]/20 p-2.5 rounded-xl border border-[#D97706]/30 relative",children:[(0,i.jsx)(G.Z,{className:"w-6 h-6 text-[#D97706]"}),(0,i.jsx)("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-[#D97706] rounded-full animate-pulse shadow-[0_0_10px_#D97706]"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-start leading-none gap-1",children:[(0,i.jsx)("span",{className:"text-[10px] uppercase font-bold tracking-[0.2em] text-[#D97706]",children:d("title")}),(0,i.jsxs)("span",{className:"font-serif font-bold text-lg",children:[u," ",d("items")]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4 pl-5 border-l border-[#FAF7F2]/10 text-right",children:[(0,i.jsxs)("div",{className:"flex flex-col items-end leading-none gap-1",children:[(0,i.jsx)("span",{className:"text-[10px] uppercase font-bold tracking-[0.2em] text-[#FAF7F2]/50",children:d("total")}),(0,i.jsxs)("span",{className:"font-serif font-black text-xl text-[#D97706] tracking-tight",children:["₺",m]})]}),(0,i.jsx)(H.Z,{className:"w-5 h-5 text-[#FAF7F2]/60"})]})]}),(0,i.jsx)(N.M,{children:P&&(0,i.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center",children:[(0,i.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>_(!1),className:"absolute inset-0 bg-black/80 backdrop-blur-md"}),(0,i.jsxs)(c.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"bg-[#1A1A1A] border-t border-[#FAF7F2]/10 w-full max-w-lg rounded-t-[2.5rem] sm:rounded-3xl p-6 relative z-10 max-h-[92vh] flex flex-col shadow-2xl",children:[(0,i.jsx)("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] mix-blend-overlay rounded-t-[2.5rem]"}),(0,i.jsx)("div",{className:"w-16 h-1 bg-[#FAF7F2]/10 rounded-full mx-auto mb-8 sm:hidden"}),(0,i.jsxs)("div",{className:"flex justify-between items-center mb-8 relative z-10",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-3xl font-serif font-black text-[#FAF7F2] tracking-tight",children:d("title")}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,i.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-[#D97706] animate-pulse"}),(0,i.jsx)("p",{className:"text-xs text-[#D97706] font-bold uppercase tracking-[0.2em]",children:s})]})]}),(0,i.jsx)("button",{onClick:()=>_(!1),className:"w-10 h-10 flex items-center justify-center bg-[#FAF7F2]/5 hover:bg-[#FAF7F2]/10 border border-[#FAF7F2]/5 rounded-full transition-colors",children:(0,i.jsx)(y.Z,{className:"w-5 h-5 text-[#FAF7F2]/80"})})]}),(0,i.jsx)("div",{className:"flex-1 overflow-y-auto space-y-4 mb-6 custom-scroll px-1 relative z-10",children:h.map(e=>(0,i.jsx)(c.E.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,scale:.95},className:"group p-4 rounded-2xl bg-[#FAF7F2]/5 border border-[#FAF7F2]/5 hover:border-[#D97706]/30 hover:bg-[#FAF7F2]/[0.08] transition-all relative overflow-hidden",children:(0,i.jsxs)("div",{className:"flex gap-4",children:[e.image&&(0,i.jsx)("div",{className:"w-20 h-20 rounded-xl overflow-hidden bg-black/50 shrink-0 border border-[#FAF7F2]/10",children:(0,i.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover grayscale-[20%] group-hover:grayscale-0 transition-all duration-500"})}),(0,i.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,i.jsx)("h4",{className:"font-serif font-bold text-lg text-[#FAF7F2] leading-tight",children:e.name}),(0,i.jsx)("button",{onClick:()=>p(e.id),className:"p-1.5 rounded-lg text-[#FAF7F2]/40 hover:text-red-400 hover:bg-red-500/10 transition-all opacity-0 group-hover:opacity-100",children:(0,i.jsx)(J.Z,{className:"w-4 h-4"})})]}),e.options&&e.options.length>0&&(0,i.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-2",children:e.options.map((e,t)=>(0,i.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide bg-[#D97706]/10 text-[#D97706] border border-[#D97706]/20",children:e},t))}),e.note&&(0,i.jsxs)("p",{className:"text-[11px] font-medium text-[#FAF7F2]/60 italic mt-2 border-l-2 border-[#D97706]/50 pl-2",children:['"',e.note,'"']})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,i.jsxs)("div",{className:"flex items-center bg-[#1A1A1A] rounded-lg border border-[#FAF7F2]/10 p-0.5",children:[(0,i.jsx)("button",{onClick:()=>g(e.id,-1),className:"w-7 h-7 rounded-md hover:bg-[#FAF7F2]/10 flex items-center justify-center transition-colors text-[#FAF7F2]/60",children:(0,i.jsx)(F.Z,{className:"w-3.5 h-3.5"})}),(0,i.jsx)("span",{className:"font-medium text-[#FAF7F2] w-6 text-center text-sm",children:e.quantity}),(0,i.jsx)("button",{onClick:()=>g(e.id,1),className:"w-7 h-7 rounded-md hover:bg-[#FAF7F2]/10 flex items-center justify-center transition-colors text-[#D97706]",children:(0,i.jsx)(j.Z,{className:"w-3.5 h-3.5"})})]}),(0,i.jsxs)("span",{className:"font-serif font-bold text-lg text-[#FAF7F2]",children:["₺",(e.price*e.quantity).toFixed(0)]})]})]})]})},e.id))}),(0,i.jsxs)("div",{className:"pt-4 border-t border-[#FAF7F2]/10 relative z-10",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,i.jsx)("span",{className:"text-xs font-bold text-[#D97706] uppercase tracking-[0.2em]",children:d("note")}),(0,i.jsx)("div",{className:"h-px flex-1 bg-[#D97706]/20"})]}),(0,i.jsx)("textarea",{value:v,onChange:e=>{e.target.value.length<=200&&w(e.target.value)},placeholder:d("notePlaceholder"),className:"w-full px-4 py-3 bg-[#FAF7F2]/5 border border-[#FAF7F2]/10 rounded-xl text-sm text-[#FAF7F2] placeholder:text-[#FAF7F2]/30 resize-none focus:ring-1 focus:ring-[#D97706]/50 focus:border-[#D97706]/50 outline-none transition-all font-sans",rows:2}),(0,i.jsx)("div",{className:"flex justify-end mt-1 px-1",children:(0,i.jsxs)("span",{className:"text-[10px] text-[#FAF7F2]/30 font-medium",children:[v.length,"/200"]})})]}),!k&&(0,i.jsxs)(c.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"mt-4 p-4 bg-red-900/20 border border-red-500/30 rounded-xl flex items-center gap-3 relative z-10",children:[(0,i.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center shrink-0",children:(0,i.jsx)(x.Z,{className:"w-5 h-5 text-red-500"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs font-bold text-red-400 uppercase tracking-widest",children:d("locationError")}),(0,i.jsx)("p",{className:"text-xs text-red-300/60 leading-tight mt-0.5",children:d("locationErrorDesc")})]})]}),(0,i.jsxs)("div",{className:"pt-6 border-t border-[#FAF7F2]/10 mt-4 relative z-10",children:[(0,i.jsxs)("div",{className:"flex justify-between items-end mb-6 px-1",children:[(0,i.jsxs)("div",{className:"flex flex-col leading-none",children:[(0,i.jsx)("span",{className:"text-xs font-bold text-[#FAF7F2]/40 uppercase tracking-[0.2em] mb-2",children:d("total")}),(0,i.jsxs)("span",{className:"text-4xl font-serif font-black text-[#D97706] tracking-tight",children:["₺",m]})]}),(0,i.jsx)("div",{className:"text-right leading-none pb-1",children:(0,i.jsxs)("span",{className:"text-sm font-medium text-[#FAF7F2]/60",children:[u," ",d("items")]})})]}),(0,i.jsx)("button",{onClick:handleCheckout,disabled:R||!k,className:"w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-3 shadow-lg transition-all active:scale-[0.98] ".concat(k?"bg-gradient-to-r from-[#D97706] to-amber-600 text-white shadow-amber-900/20 hover:brightness-110":"bg-[#FAF7F2]/5 text-[#FAF7F2]/20 cursor-not-allowed border border-[#FAF7F2]/5"),children:R?(0,i.jsx)("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"tracking-wide font-sans",children:d("checkout")}),(0,i.jsx)(H.Z,{className:"w-5 h-5"})]})})]})]})]})})]})}var W=a(7810),U=a(2882),K=a(8034);function getDeviceId(){let e="restoqr_device_id",t=localStorage.getItem(e);return t||(t="device_"+Math.random().toString(36).substr(2,9)+"_"+Date.now().toString(36),localStorage.setItem(e,t)),t}let V=[{label:"\xdczg\xfcn",emoji:"\uD83D\uDE14",color:"#EF4444"},{label:"Eh İşte",emoji:"\uD83D\uDE10",color:"#F97316"},{label:"İyi",emoji:"\uD83D\uDE42",color:"#EAB308"},{label:"Harika",emoji:"\uD83D\uDE04",color:"#84CC16"},{label:"M\xfckemmel!",emoji:"\uD83E\uDD29",color:"#22C55E"}];function RatingModal(e){let{isOpen:t,onClose:a,restaurantId:s,restaurantName:r}=e,n=(0,b.useTranslations)("Rating"),[o,x]=(0,l.useState)(0),[u,m]=(0,l.useState)(0),[h,p]=(0,l.useState)(""),[g,f]=(0,l.useState)(!1),[v,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{t&&(x(0),p(""),j(!1))},[t]);let handleSubmit=async()=>{if(0===o)return;f(!0);let e=getDeviceId();try{let t=await fetch("/api/review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({restaurantId:s,rating:o,comment:h,deviceId:e,userName:"Misafir"})}),r=await t.json();if(t.ok)j(!0),(0,K.Z)({particleCount:150,spread:70,origin:{y:.6},colors:["#D97706","#FAF7F2","#065F46"]}),B.default.success(n("success"),{icon:"\uD83C\uDF1F",style:{background:"#1A1A1A",color:"#FAF7F2",border:"1px solid #D97706"}}),setTimeout(a,3e3);else if("ALREADY_RATED"===r.error)B.default.error(n("alreadyRated"),{icon:"\uD83D\uDC6E",style:{background:"#1A1A1A",color:"#FAF7F2",border:"1px solid #dc2626"}}),a();else throw Error(r.error)}catch(e){console.error("Rating error:",e),B.default.error(n("error"))}finally{f(!1)}},w=(u||o)>0?V[(u||o)-1]:null;return(0,i.jsx)(N.M,{children:t&&(0,i.jsxs)("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4 sm:p-6 overflow-hidden",children:[(0,i.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"absolute inset-0 bg-black/95 backdrop-blur-2xl"}),(0,i.jsxs)(c.E.div,{initial:{scale:.9,opacity:0,y:40},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:40},transition:{type:"spring",stiffness:300,damping:25},className:"relative w-full max-w-lg bg-[#0A0A0A] border border-white/5 rounded-[2.5rem] shadow-[0_0_100px_rgba(0,0,0,0.5)] overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute top-0 left-1/4 right-1/4 h-[1px] bg-gradient-to-r from-transparent via-amber-500/50 to-transparent"}),(0,i.jsx)("div",{className:"relative z-10 p-8 sm:p-12",children:(0,i.jsx)(N.M,{mode:"wait",children:v?(0,i.jsxs)(c.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"py-12 flex flex-col items-center text-center",children:[(0,i.jsx)("div",{className:"w-24 h-24 bg-amber-500 rounded-full flex items-center justify-center mb-8 shadow-[0_0_50px_rgba(245,158,11,0.5)]",children:(0,i.jsx)(k.Z,{className:"w-12 h-12 text-black stroke-[3]"})}),(0,i.jsx)("h2",{className:"text-3xl font-serif font-medium text-white mb-4",children:"Teşekk\xfcr Ederiz"}),(0,i.jsx)("p",{className:"text-zinc-500 max-w-[250px] leading-relaxed",children:"Geri bildiriminiz başarıyla iletildi. Deneyiminizi paylaştığınız i\xe7in teşekk\xfcrler."})]},"success"):(0,i.jsxs)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.9},className:"flex flex-col items-center text-center",children:[(0,i.jsx)("button",{onClick:a,className:"absolute top-6 right-6 p-2 rounded-full hover:bg-white/5 text-zinc-500 hover:text-white transition-colors",children:(0,i.jsx)(y.Z,{className:"w-6 h-6"})}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-amber-500/10 border border-amber-500/20 text-amber-500 text-[10px] uppercase tracking-widest font-bold mb-4",children:[(0,i.jsx)(W.Z,{className:"w-3 h-3"})," Değerlendirme"]}),(0,i.jsx)("h2",{className:"text-3xl sm:text-4xl font-serif font-medium text-white mb-2 leading-tight",children:n("title")}),(0,i.jsx)("p",{className:"text-zinc-500 text-sm",children:r})]}),(0,i.jsx)("div",{className:"h-24 flex flex-col items-center justify-center mb-4",children:(0,i.jsx)(N.M,{mode:"wait",children:w?(0,i.jsxs)(c.E.div,{initial:{y:10,opacity:0,scale:.8},animate:{y:0,opacity:1,scale:1},exit:{y:-10,opacity:0,scale:.8},className:"flex flex-col items-center",children:[(0,i.jsx)("span",{className:"text-6xl mb-2 drop-shadow-[0_0_20px_rgba(255,255,255,0.2)]",children:w.emoji}),(0,i.jsx)("span",{className:"text-sm font-bold tracking-widest uppercase italic",style:{color:w.color},children:w.label})]},w.label):(0,i.jsx)(c.E.div,{initial:{opacity:.2},animate:{opacity:.3},className:"text-6xl grayscale filter",children:"\uD83D\uDE36"})})}),(0,i.jsx)("div",{className:"flex justify-center gap-3 mb-10 bg-white/[0.02] p-4 rounded-3xl border border-white/[0.05]",children:[1,2,3,4,5].map(e=>(0,i.jsx)("button",{onMouseEnter:()=>m(e),onMouseLeave:()=>m(0),onClick:()=>x(e),className:"relative focus:outline-none transition-transform active:scale-95 p-1",children:(0,i.jsx)(d.Z,{className:"w-10 h-10 transition-all duration-300 ".concat(e<=(u||o)?"fill-amber-500 text-amber-500 drop-shadow-[0_0_15px_rgba(245,158,11,0.5)]":"text-zinc-800 hover:text-zinc-700")})},e))}),(0,i.jsxs)("div",{className:"w-full relative",children:[(0,i.jsx)("div",{className:"absolute top-4 left-4 text-amber-500/30",children:(0,i.jsx)(U.Z,{className:"w-4 h-4"})}),(0,i.jsx)("textarea",{value:h,onChange:e=>p(e.target.value),placeholder:n("placeholder"),className:"w-full h-32 bg-white/[0.03] border border-white/10 rounded-3xl p-5 pl-12 text-white placeholder-zinc-700 text-sm resize-none focus:border-amber-500/40 focus:bg-white/[0.05] outline-none transition-all font-sans"})]}),(0,i.jsx)("button",{onClick:handleSubmit,disabled:0===o||g,className:"w-full mt-8 py-5 rounded-[1.5rem] font-black text-sm tracking-[0.2em] uppercase transition-all relative overflow-hidden group ".concat(o>0&&!g?"bg-amber-500 text-black hover:bg-amber-400 hover:scale-[1.02] shadow-[0_20px_40px_-10px_rgba(245,158,11,0.3)]":"bg-zinc-900 text-zinc-700 cursor-not-allowed border border-white/5"),children:g?(0,i.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,i.jsx)("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin"}),(0,i.jsx)("span",{children:"G\xd6NDERİLİYOR"})]}):(0,i.jsx)("span",{children:n("submit")})})]},"form")})}),(0,i.jsx)("div",{className:"absolute inset-0 opacity-20 pointer-events-none mix-blend-overlay",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/carbon-fibre.png")'}})]})]})})}function MenuPageClient(e){var t,a,s,n,o,c,d;let{params:x}=e,[u,m]=(0,l.useState)(null),[h,b]=(0,l.useState)(!0),[p,g]=(0,l.useState)(null),[f,v]=(0,l.useState)(null),[j,w]=(0,l.useState)(!1),[N,y]=(0,l.useState)(!1),[F,k]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{let e=x.slug;if(!e)return;b(!0);let t=null,a=[],s=[],i={waiterCallEnabled:!0,coalRequestEnabled:!1,ratingSystemEnabled:!0},updateMenuState=()=>{if(!t)return;let e=a.map((e,t)=>{let a=s.filter(a=>String(a.categoryId)===String(e.id)||a.category===e.id||!a.categoryId&&0===t);return{...e,items:a}});m({restaurant:t,categories:e,settings:i}),b(!1)},l=(0,T.cf)((0,T.JU)(r,"restaurants",e),e=>{if(!e.exists()){g("restaurantNotFound"),b(!1);return}t={...e.data(),id:e.id},updateMenuState()}),n=(0,T.cf)((0,T.hJ)(r,"restaurants",e,"categories"),e=>{a=e.docs.map(e=>({id:e.id,...e.data()})),updateMenuState()}),o=(0,T.cf)((0,T.hJ)(r,"restaurants",e,"products"),e=>{s=e.docs.map(e=>{let t=e.data(),a=Number(t.price||t.basePrice||0);return{id:e.id,...t,price:a,basePrice:a,ingredients:t.ingredients||[],extras:t.extras||[]}}).filter(e=>!1!==e.isActive),updateMenuState()}),c=(0,T.cf)((0,T.JU)(r,"restaurants",e,"settings","general"),e=>{e.exists()&&(i={...i,...e.data()},updateMenuState())});return()=>{l(),n(),o(),c()}},[x.slug]),(0,l.useEffect)(()=>{x.slug&&(trackScan(x.slug),trackView(x.slug))},[x.slug]),h)?(0,i.jsx)("div",{className:"min-h-screen bg-transparent flex items-center justify-center",children:(0,i.jsx)(LoadingSpinner,{})}):p||!u?(0,i.jsx)("div",{className:"min-h-screen bg-transparent flex items-center justify-center",children:(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Restoran Bulunamadı"})})}):(0,i.jsxs)("div",{className:"min-h-screen bg-transparent text-white relative pb-32",children:[(0,i.jsx)(MenuHeader,{restaurant:u.restaurant,tableNumber:x.table||"1",onRatingClick:()=>y(!0),ratingSystemEnabled:null===(t=u.settings)||void 0===t?void 0:t.ratingSystemEnabled}),(0,i.jsx)(ServiceButtons,{restaurantId:x.slug,tableId:x.table||"1",tableName:(null===(s=u.restaurant.tables)||void 0===s?void 0:null===(a=s.find(e=>e.id.toString()===(x.table||"1")))||void 0===a?void 0:a.name)||"Masa ".concat(x.table||"1"),location:u.restaurant.coordinates,waiterCallEnabled:null===(n=u.settings)||void 0===n?void 0:n.waiterCallEnabled,coalRequestEnabled:null===(o=u.settings)||void 0===o?void 0:o.coalRequestEnabled}),(0,i.jsx)(CategoryTabs,{categories:u.categories,onCategoryChange:e=>{k(!0)}}),(0,i.jsx)(ProductGrid,{categories:u.categories,onProductClick:e=>{v(e),w(!0)},isListView:F}),(0,i.jsx)(CartButton,{restaurantId:x.slug,tableId:x.table||"1",tableName:(null===(d=u.restaurant.tables)||void 0===d?void 0:null===(c=d.find(e=>e.id.toString()===(x.table||"1")))||void 0===c?void 0:c.name)||"Masa ".concat(x.table||"1"),location:u.restaurant.coordinates,onOrderSuccess:()=>{var e;(null===(e=u.settings)||void 0===e?void 0:e.ratingSystemEnabled)!==!1&&y(!0)}}),(0,i.jsx)(ProductCustomizer,{product:f,isOpen:j,onClose:()=>w(!1),locale:x.locale}),(0,i.jsx)(RatingModal,{isOpen:N,onClose:()=>y(!1),restaurantId:x.slug,restaurantName:u.restaurant.name})]})}},7087:function(e,t,a){"use strict";a.r(t),a.d(t,{CartProvider:function(){return CartProvider},useCart:function(){return useCart}});var s=a(7437),r=a(2265);let i=(0,r.createContext)(void 0);function CartProvider(e){let{children:t}=e,[a,l]=(0,r.useState)([]),[n,o]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=localStorage.getItem("cart"),t=localStorage.getItem("cartNote");if(e)try{l(JSON.parse(e))}catch(e){console.error("Failed to parse cart",e)}t&&o(t)},[]),(0,r.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(a))},[a]),(0,r.useEffect)(()=>{localStorage.setItem("cartNote",n)},[n]);let c=a.reduce((e,t)=>e+t.price*t.quantity,0),d=a.reduce((e,t)=>e+t.quantity,0);return(0,s.jsx)(i.Provider,{value:{items:a,addToCart:e=>{l(t=>{let a=t.find(t=>{var a,s;return t.productId===e.productId&&JSON.stringify(null===(a=t.options)||void 0===a?void 0:a.sort())===JSON.stringify(null===(s=e.options)||void 0===s?void 0:s.sort())&&(t.note||"")===(e.note||"")});if(a)return t.map(e=>e.id===a.id?{...e,quantity:e.quantity+1}:e);let s="".concat(e.productId,"-").concat(Date.now(),"-").concat(Math.random());return[...t,{...e,id:s}]})},removeFromCart:e=>{l(t=>t.filter(t=>t.id!==e))},updateQuantity:(e,t)=>{l(a=>a.map(a=>{if(a.id===e){let e=Math.max(0,a.quantity+t);return{...a,quantity:e}}return a}).filter(e=>e.quantity>0))},clearCart:()=>{l([]),o("")},total:c,itemCount:d,cartNote:n,setCartNote:o},children:t})}function useCart(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}},function(e){e.O(0,[609,483,535,13,971,184,744],function(){return e(e.s=727)}),_N_E=e.O()}]);