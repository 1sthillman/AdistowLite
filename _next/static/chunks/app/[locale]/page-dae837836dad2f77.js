(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61],{5031:function(e,t,a){Promise.resolve().then(a.bind(a,1597))},1597:function(e,t,a){"use strict";let r,s;a.r(t),a.d(t,{default:function(){return HomePage}});var i=a(7437),l=a(2265),n=a(4033),o=a(8956),c=a(3546),d=a(1205),x=a(6522),u=a(9291),m=a(5340),h=a(6142),p=a(6141),b=a(9764),g=a(116),f=a(6691),v=a.n(f);function MenuHeader(e){let{restaurant:t,tableNumber:a,onRatingClick:r,ratingSystemEnabled:s=!0}=e,c=(0,g.useTranslations)("Common"),{scrollY:f}=(0,x.v)(),w=(0,n.useRouter)(),[j,N]=(0,l.useState)(!1),y=(0,u.H)(f,[0,500],[0,250]),F=(0,u.H)(f,[0,300],[1,0]),k=(0,u.H)(f,[0,500],[1.1,1.2]),A=(0,u.H)(f,[200,250],[0,1]),D=(0,u.H)(f,[200,250],[-20,0]),E=(null==t?void 0:t.rating)?Number(t.rating).toFixed(1):"5.0",S=(null==t?void 0:t.avgPreparationTime)||"15-20",changeLanguage=e=>{let t=window.location.pathname,a=window.location.search;t.startsWith("/tr")?t=t.replace("/tr",""):t.startsWith("/en")&&(t=t.replace("/en","")),t.startsWith("/")||(t="/"+t),w.push("/".concat(e).concat(t).concat(a).replace("//","/")),N(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"absolute top-0 left-0 right-0 h-[60vh] overflow-hidden z-0 pointer-events-none",children:(0,i.jsxs)(d.E.div,{style:{y,scale:k,opacity:F},className:"relative w-full h-full",children:[(0,i.jsx)(v(),{src:(null==t?void 0:t.coverImage)||(null==t?void 0:t.image)||"https://images.unsplash.com/photo-1514362545857-3bc165497db5?q=80&w=2670&auto=format&fit=crop",alt:"Background",fill:!0,className:"object-cover",priority:!0}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-[#050505]"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-[#050505] via-[#050505]/60 to-transparent"})]})}),(0,i.jsxs)("div",{className:"relative z-10 w-full flex flex-col items-center pt-24 pb-8 px-6 text-center",children:[(0,i.jsxs)(d.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,ease:"easeOut"},className:"relative w-24 h-24 mb-6 rounded-full p-1 shadow-[0_0_50px_rgba(255,255,255,0.1)]",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent rounded-full backdrop-blur-md border border-white/10"}),(0,i.jsx)("div",{className:"w-full h-full rounded-full overflow-hidden relative z-10",children:(0,i.jsx)(v(),{src:(null==t?void 0:t.logo)||"https://ui-avatars.com/api/?name=R&background=000&color=fff",alt:"Logo",fill:!0,className:"object-cover"})})]}),(0,i.jsx)(d.E.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.1,ease:"easeOut"},className:"text-4xl sm:text-5xl font-serif font-medium text-white mb-2 tracking-tight drop-shadow-2xl",children:null==t?void 0:t.name}),(0,i.jsxs)(d.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.2,ease:"easeOut"},className:"flex items-center gap-3 mt-4",children:[s&&(0,i.jsxs)("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 backdrop-blur-xl border border-white/10 hover:bg-amber-500/20 hover:border-amber-500/30 transition-all group",children:[(0,i.jsx)(m.Z,{className:"w-4 h-4 text-amber-500 fill-amber-500/20 group-hover:fill-amber-500 transition-colors"}),(0,i.jsx)("span",{className:"text-sm font-medium text-white",children:E})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,i.jsx)(h.Z,{className:"w-4 h-4 text-emerald-400"}),(0,i.jsxs)("span",{className:"text-sm font-medium text-white/90",children:[c("table")," ",a]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,i.jsx)(p.Z,{className:"w-4 h-4 text-blue-400"}),(0,i.jsxs)("span",{className:"text-sm font-medium text-white/90",children:[S," min"]})]})]})]}),(0,i.jsxs)(d.E.div,{style:{opacity:A,y:D},className:"fixed top-0 left-0 right-0 h-20 bg-[#050505]/80 backdrop-blur-xl border-b border-white/5 z-50 flex items-center justify-between px-6",children:[(0,i.jsx)("div",{className:"font-serif text-xl font-bold text-white tracking-wide",children:null==t?void 0:t.name}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>N(!j),className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:(0,i.jsx)(o.Z,{className:"w-5 h-5 text-white/80"})}),(0,i.jsx)("button",{className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:(0,i.jsx)(b.Z,{className:"w-5 h-5 text-white/80"})})]}),j&&(0,i.jsxs)("div",{className:"absolute top-20 right-6 bg-[#1A1A1A] border border-white/10 rounded-xl overflow-hidden shadow-2xl min-w-[140px] animate-in fade-in zoom-in-95 duration-200",children:[(0,i.jsx)("button",{onClick:()=>changeLanguage("tr"),className:"w-full text-left px-5 py-3 text-white/90 hover:bg-white/5 text-sm",children:"T\xfcrk\xe7e"}),(0,i.jsx)("button",{onClick:()=>changeLanguage("en"),className:"w-full text-left px-5 py-3 text-white/90 hover:bg-white/5 text-sm",children:"English"})]})]}),(0,i.jsxs)("div",{className:"absolute top-0 right-0 p-6 z-20 flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>N(!j),className:"w-10 h-10 rounded-full bg-black/20 backdrop-blur-md flex items-center justify-center hover:bg-black/40 transition-colors border border-white/10",children:(0,i.jsx)(o.Z,{className:"w-5 h-5 text-white"})}),j&&200>f.get()&&(0,i.jsxs)("div",{className:"absolute top-20 right-6 bg-[#1A1A1A]/90 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden shadow-2xl min-w-[140px] z-[60]",children:[(0,i.jsx)("button",{onClick:()=>changeLanguage("tr"),className:"w-full text-left px-5 py-3 text-white hover:bg-white/5 text-sm",children:"T\xfcrk\xe7e"}),(0,i.jsx)("button",{onClick:()=>changeLanguage("en"),className:"w-full text-left px-5 py-3 text-white hover:bg-white/5 text-sm",children:"English"})]})]})]})}function CategoryTabs(e){var t;let{categories:a,onCategoryChange:r,activeCategory:s}=e,[n,o]=(0,l.useState)(s||(null===(t=a[0])||void 0===t?void 0:t.id)),[c,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let handleScroll=()=>{x(window.scrollY>300);let e=window.scrollY+150;for(let t=a.length-1;t>=0;t--){let r=a[t],s=document.getElementById("category-".concat(r.id));if(s&&s.offsetTop<=e){o(r.id);break}}};return window.addEventListener("scroll",handleScroll),()=>window.removeEventListener("scroll",handleScroll)},[a]),(0,l.useEffect)(()=>{s&&o(s)},[s]);let handleCategoryClick=e=>{o(e),r&&r(e);let t=document.getElementById("category-".concat(e));if(t){let e=document.body.getBoundingClientRect().top,a=t.getBoundingClientRect().top;window.scrollTo({top:a-e-100,behavior:"smooth"})}};return a&&0!==a.length?(0,i.jsx)("div",{className:"sticky top-20 z-30 transition-all duration-300 py-4 ".concat(c?"bg-[#050505]/80 backdrop-blur-xl border-b border-white/5 shadow-2xl":"bg-transparent"),children:(0,i.jsx)("div",{className:"w-full overflow-x-auto no-scrollbar px-4 sm:px-6",children:(0,i.jsx)("div",{className:"flex items-center gap-3 w-max mx-auto",children:a.map(e=>{let t=n===e.id;return(0,i.jsxs)("button",{onClick:()=>handleCategoryClick(e.id),className:"\n                                    relative px-5 py-2.5 rounded-full text-sm font-medium transition-all duration-300 whitespace-nowrap\n                                    flex items-center gap-2 group\n                                    ".concat(t?"text-white":"text-gray-400 hover:text-white bg-white/5 border border-white/5 hover:bg-white/10","\n                                "),children:[t&&(0,i.jsx)(d.E.div,{layoutId:"activeTabBackground",className:"absolute inset-0 bg-gradient-to-r from-amber-600 to-amber-700 rounded-full shadow-[0_0_20px_rgba(217,119,6,0.4)]",transition:{type:"spring",bounce:.2,duration:.6}}),(0,i.jsx)("span",{className:"relative z-10 font-serif tracking-wide",children:e.name}),e.items&&e.items.length>0&&(0,i.jsx)("span",{className:"\n                                        relative z-10 text-[10px] px-1.5 py-0.5 rounded-md font-bold\n                                        ".concat(t?"bg-black/20 text-white/90":"bg-black/20 text-gray-500 group-hover:text-gray-300","\n                                    "),children:e.items.length})]},e.id)})})})}):null}var w=a(8438),j=a(9883);function ProductCard(e){let{item:t,onClick:a}=e,r=(0,g.useTranslations)("Product"),[s,n]=(0,l.useState)(!1),o=t.image&&!s;return(0,i.jsxs)(d.E.div,{onClick:a,className:"h-full cursor-pointer group relative",initial:{opacity:0,y:30},animate:{opacity:1,y:0},whileHover:{y:-8},transition:{type:"spring",stiffness:200,damping:20},children:[(0,i.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-amber-500/20 to-emerald-500/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-70 transition-opacity duration-700"}),(0,i.jsxs)("div",{className:"relative h-full flex flex-col overflow-hidden rounded-2xl border border-white/5 bg-white/[0.03] backdrop-blur-xl shadow-2xl ring-1 ring-white/10 transition-all duration-300 group-hover:bg-white/[0.06] group-hover:border-white/10 group-hover:shadow-[0_20px_40px_-15px_rgba(0,0,0,0.5)]",children:[(0,i.jsxs)("div",{className:"relative aspect-[4/3] w-full overflow-hidden",children:[o?(0,i.jsxs)("div",{className:"w-full h-full relative",children:[(0,i.jsx)("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transition-transform duration-1000 ease-out group-hover:scale-110",onError:()=>n(!0)}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-[#050505] via-transparent to-transparent opacity-80"})]}):(0,i.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center gap-3 bg-gradient-to-br from-gray-800 to-black",children:(0,i.jsx)(w.Z,{className:"w-8 h-8 text-white/10"})}),(0,i.jsx)("div",{className:"absolute top-3 right-3 z-10",children:(0,i.jsxs)("div",{className:"px-3 py-1.5 rounded-lg bg-black/60 backdrop-blur-md border border-white/10 shadow-lg flex items-center gap-1 group-hover:border-amber-500/30 transition-colors",children:[(0,i.jsx)("span",{className:"text-amber-500 font-bold text-sm tracking-wide",children:"₺"}),(0,i.jsx)("span",{className:"text-white font-bold text-lg tracking-tight",children:t.price})]})})]}),(0,i.jsxs)("div",{className:"p-5 flex-1 flex flex-col relative",children:[(0,i.jsx)("h3",{className:"font-serif font-bold text-xl text-white mb-2 leading-tight group-hover:text-amber-400 transition-colors duration-300 drop-shadow-sm",children:t.name}),t.description&&(0,i.jsx)("p",{className:"text-sm text-gray-400 line-clamp-2 leading-relaxed font-light mb-4 group-hover:text-gray-300 transition-colors",children:t.description}),(0,i.jsxs)("div",{className:"mt-auto flex items-center justify-between pt-2 border-t border-white/5",children:[t.extras&&t.extras.length>0?(0,i.jsx)("span",{className:"text-[10px] uppercase font-bold tracking-widest text-emerald-400/80 bg-emerald-400/10 px-2 py-1 rounded-md border border-emerald-400/20",children:r("options",{count:t.extras.length})}):(0,i.jsx)("div",{}),(0,i.jsx)(d.E.button,{whileTap:{scale:.9},className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-orange-600 text-white flex items-center justify-center shadow-lg shadow-amber-900/30 group-hover:shadow-amber-500/40 opacity-90 group-hover:opacity-100 transition-all",children:(0,i.jsx)(j.Z,{className:"w-5 h-5"})})]})]})]})]})}var N=a(8868);function CategorySection(e){var t;let{category:a,onProductClick:r,isListView:s}=e,n=(0,l.useRef)(null),o=(0,N.Y)(n,{once:!0,amount:.1});return(0,i.jsxs)("div",{ref:n,id:"category-".concat(a.id),className:"mb-24 scroll-mt-40",children:[(0,i.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:o?{opacity:1,y:0}:{opacity:0,y:20},transition:{duration:.6},className:"flex items-center gap-6 mb-10 px-4",children:[(0,i.jsx)("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-transparent via-amber-500/40 to-transparent"}),(0,i.jsx)("h2",{className:"text-3xl md:text-4xl font-serif font-medium text-[#FAF7F2] tracking-wide text-center drop-shadow-xl",children:a.name}),(0,i.jsx)("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-transparent via-amber-500/40 to-transparent"})]}),(0,i.jsx)("div",{className:"grid gap-x-4 gap-y-10 px-4 transition-all duration-500 ".concat(s?"grid-cols-1 max-w-xl mx-auto":"grid-cols-2 lg:grid-cols-3"),children:null===(t=a.items)||void 0===t?void 0:t.map((e,t)=>(0,i.jsx)(d.E.div,{initial:{opacity:0,scale:.95},animate:o?{opacity:1,scale:1}:{opacity:0,scale:.95},transition:{duration:.5,delay:.05*t},children:(0,i.jsx)(ProductCard,{item:e,onClick:()=>r(e)})},e.id))})]})}function ProductGrid(e){let{categories:t,onProductClick:a,isListView:r}=e;return t&&0!==t.length?(0,i.jsx)("div",{className:"container max-w-screen-xl mx-auto pb-24",children:t.map(e=>(0,i.jsx)(CategorySection,{category:e,onProductClick:a,isListView:r},e.id))}):null}var y=a(2167),F=a(2549),k=a(1827),A=a(4891),D=a(2442),E=a(7087);function ProductCustomizer(e){let{product:t,isOpen:a,onClose:r}=e,s=(0,g.useTranslations)("Product"),{addToCart:n}=(0,E.useCart)(),[o,c]=(0,l.useState)({removedIngredients:[],addedExtras:[],specialNotes:""}),[x,u]=(0,l.useState)(0),[m,h]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{t&&(u(t.price),c({removedIngredients:[],addedExtras:[],specialNotes:""}))},[t]),(0,l.useEffect)(()=>{if(t){let e=t.price;o.addedExtras.forEach(a=>{var r;let s=null===(r=t.extras)||void 0===r?void 0:r.find(e=>e.id===a);s&&(e+=s.price)}),u(e)}},[o,t]),!t)return null;let toggleIngredient=(e,t)=>{t&&c(t=>({...t,removedIngredients:t.removedIngredients.includes(e)?t.removedIngredients.filter(t=>t!==e):[...t.removedIngredients,e]}))},toggleExtra=e=>{c(t=>({...t,addedExtras:t.addedExtras.includes(e)?t.addedExtras.filter(t=>t!==e):[...t.addedExtras,e]}))};return(0,i.jsxs)(y.M,{children:[a&&(0,i.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center",children:[(0,i.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/80 backdrop-blur-xl",onClick:r}),(0,i.jsxs)(d.E.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full sm:max-w-xl bg-[#1A1A1A] border border-[#FAF7F2]/10 sm:rounded-3xl rounded-t-3xl overflow-hidden flex flex-col max-h-[90vh] sm:max-h-[85vh] shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"p-6 border-b border-[#FAF7F2]/5 bg-[#1A1A1A]/95 relative",children:[(0,i.jsx)("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] mix-blend-overlay"}),(0,i.jsxs)("div",{className:"flex justify-between items-start gap-4 relatie z-10",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h2",{className:"text-3xl font-serif font-black text-[#FAF7F2] mb-1 leading-tight",children:t.name}),(0,i.jsx)("p",{className:"text-sm text-[#FAF7F2]/60 font-light font-sans line-clamp-2",children:t.description})]}),(0,i.jsx)("button",{onClick:r,className:"p-2 bg-[#FAF7F2]/5 hover:bg-[#FAF7F2]/10 rounded-full transition-colors border border-[#FAF7F2]/5",children:(0,i.jsx)(F.Z,{className:"w-5 h-5 text-[#FAF7F2]/60 hover:text-[#FAF7F2]"})})]})]}),t.image&&(0,i.jsxs)("div",{className:"relative h-64 w-full overflow-hidden flex-shrink-0 group cursor-zoom-in",onClick:()=>h(!0),children:[(0,i.jsx)(d.E.img,{src:t.image,alt:t.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",layoutId:"product-image-".concat(t.id)}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1A1A1A] via-transparent to-transparent opacity-60"}),(0,i.jsxs)("div",{className:"absolute bottom-4 right-4 bg-black/40 backdrop-blur-md px-3 py-1 rounded-full border border-white/10 flex items-center gap-2",children:[(0,i.jsx)(k.Z,{className:"w-3 h-3 text-white/70"}),(0,i.jsx)("span",{className:"text-[10px] text-white/70 font-bold uppercase tracking-widest",children:"B\xfcy\xfctmek İ\xe7in Dokun"})]})]}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-6 custom-scroll bg-[#1A1A1A] relative",children:[t.ingredients&&t.ingredients.length>0&&(0,i.jsxs)("section",{className:"mb-8",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)("h3",{className:"text-xs font-bold text-[#D97706] uppercase tracking-[0.2em] font-sans",children:s("ingredients")}),(0,i.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-[#D97706]/30 to-transparent"})]}),(0,i.jsx)("div",{className:"space-y-2",children:t.ingredients.map(e=>{let t=o.removedIngredients.includes(e.id);return(0,i.jsx)("div",{onClick:()=>toggleIngredient(e.id,e.isRemovable),className:"p-4 rounded-xl border transition-all duration-300 ".concat(t?"bg-red-900/10 border-red-900/30 opacity-60":"bg-[#FAF7F2]/5 border-[#FAF7F2]/5 hover:border-[#D97706]/30"," ").concat(e.isRemovable?"cursor-pointer hover:bg-[#FAF7F2]/10":"cursor-not-allowed opacity-80"),children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-base font-sans ".concat(t?"line-through text-red-300":"text-[#FAF7F2]"),children:e.name}),e.isRemovable?(0,i.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center transition-colors ".concat(t?"bg-red-500/20 text-red-300":"bg-[#FAF7F2]/10 text-[#FAF7F2]/40"),children:t?(0,i.jsx)(A.Z,{className:"w-3.5 h-3.5"}):(0,i.jsx)(D.Z,{className:"w-3.5 h-3.5"})}):(0,i.jsx)("span",{className:"text-[10px] text-[#FAF7F2]/30 uppercase font-black tracking-wider",children:s("mandatory")})]})},e.id)})})]}),t.extras&&t.extras.length>0&&(0,i.jsxs)("section",{className:"mb-8",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)("h3",{className:"text-xs font-bold text-[#D97706] uppercase tracking-[0.2em] font-sans",children:s("addExtras")}),(0,i.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-[#D97706]/30 to-transparent"})]}),(0,i.jsx)("div",{className:"space-y-2",children:t.extras.map(e=>{let t=o.addedExtras.includes(e.id);return(0,i.jsx)("div",{onClick:()=>toggleExtra(e.id),className:"p-4 rounded-xl border cursor-pointer transition-all duration-300 ".concat(t?"bg-[#D97706]/10 border-[#D97706] shadow-[0_0_15px_rgba(217,119,6,0.1)]":"bg-[#FAF7F2]/5 border-[#FAF7F2]/5 hover:border-[#D97706]/30 hover:bg-[#FAF7F2]/10"),children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-base font-sans ".concat(t?"text-[#D97706] font-bold":"text-[#FAF7F2]"),children:e.name}),(0,i.jsxs)("span",{className:"text-base font-serif font-bold ".concat(t?"text-[#D97706]":"text-[#FAF7F2]/60"),children:["+₺",e.price]})]})},e.id)})})]}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)("h3",{className:"text-xs font-bold text-[#D97706] uppercase tracking-[0.2em] font-sans",children:s("specialNotes")}),(0,i.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-[#D97706]/30 to-transparent"})]}),(0,i.jsx)("textarea",{value:o.specialNotes,onChange:e=>c(t=>({...t,specialNotes:e.target.value})),placeholder:s("specialNotesPlaceholder"),maxLength:500,className:"w-full p-4 bg-[#FAF7F2]/5 border border-[#FAF7F2]/10 rounded-xl text-sm text-[#FAF7F2] placeholder-[#FAF7F2]/30 focus:border-[#D97706]/50 focus:ring-1 focus:ring-[#D97706]/50 outline-none transition-all resize-none min-h-[100px]"}),(0,i.jsx)("div",{className:"mt-2 text-right",children:(0,i.jsxs)("span",{className:"text-xs text-[#FAF7F2]/40",children:[o.specialNotes.length,"/500"]})})]})]}),(0,i.jsxs)("div",{className:"p-6 pt-4 border-t border-[#FAF7F2]/10 bg-[#1A1A1A] relative z-10",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-[#FAF7F2]/40 uppercase tracking-widest mb-1 font-bold",children:s("total")}),(0,i.jsxs)("p",{className:"text-4xl font-serif font-bold text-[#D97706] tracking-tight",children:["₺",(x||0).toFixed(2)]})]})}),(0,i.jsxs)(d.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var e,a;let s=(null===(e=t.ingredients)||void 0===e?void 0:e.filter(e=>o.removedIngredients.includes(e.id)&&e.isRemovable).map(e=>"".concat(e.name," (-)")))||[],i=(null===(a=t.extras)||void 0===a?void 0:a.filter(e=>o.addedExtras.includes(e.id)).map(e=>e.name))||[],l=[...s,...i];n({productId:t.id,name:t.name,price:x,quantity:1,image:t.image,options:l,note:o.specialNotes}),r()},className:"w-full h-14 rounded-xl font-bold text-white shadow-lg flex items-center justify-center gap-3 transition-all relative overflow-hidden group",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-[#D97706] to-amber-600 transition-all group-hover:brightness-110"}),(0,i.jsx)(j.Z,{className:"w-5 h-5 relative z-10"}),(0,i.jsx)("span",{className:"text-lg relative z-10 tracking-wide font-sans",children:s("addToOrder")})]})]})]})]}),(0,i.jsx)(y.M,{children:m&&(null==t?void 0:t.image)&&(0,i.jsxs)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-black/95 flex items-center justify-center p-4 backdrop-blur-2xl",onClick:()=>h(!1),children:[(0,i.jsx)(d.E.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"absolute top-6 right-6 p-4 bg-white/10 hover:bg-white/20 rounded-full text-white backdrop-blur-md border border-white/20 z-10",onClick:()=>h(!1),children:(0,i.jsx)(F.Z,{className:"w-6 h-6"})}),(0,i.jsx)(d.E.img,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:30,stiffness:300},src:t.image,alt:t.name,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl",style:{touchAction:"none"}}),(0,i.jsxs)("div",{className:"absolute bottom-10 left-0 right-0 text-center",children:[(0,i.jsx)("h3",{className:"text-white text-xl font-serif font-black mb-1",children:t.name}),(0,i.jsx)("p",{className:"text-white/50 text-sm font-light uppercase tracking-[0.3em]",children:"Kapalı \xc7ıkmak İ\xe7in Dokun"})]})]})})]})}var S=a(7980);function LoadingSpinner(){return(0,i.jsxs)("div",{className:"fixed inset-0 bg-black flex flex-col items-center justify-center z-[100] bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-900 via-black to-black",children:[(0,i.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,i.jsx)("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-orange-500/10 rounded-full blur-[100px] animate-pulse"}),(0,i.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-red-500/10 rounded-full blur-[100px] animate-pulse delay-1000"})]}),(0,i.jsxs)("div",{className:"relative flex flex-col items-center gap-8",children:[(0,i.jsxs)("div",{className:"relative w-32 h-32 glass-card flex items-center justify-center animate-float",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-orange-500/20 to-red-500/20 rounded-2xl blur-xl"}),(0,i.jsxs)("div",{className:"relative z-10 text-4xl animate-spin-slow",children:[(0,i.jsx)("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2",children:"\uD83E\uDD50"}),(0,i.jsx)("span",{className:"absolute top-1/2 -right-8 -translate-y-1/2",children:"\uD83E\uDD69"}),(0,i.jsx)("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2",children:"☕"}),(0,i.jsx)("span",{className:"absolute top-1/2 -left-8 -translate-y-1/2",children:"\uD83E\uDD59"})]}),(0,i.jsx)("div",{className:"z-20 p-4 bg-black/50 rounded-full backdrop-blur-md border border-white/10",children:(0,i.jsx)(S.Z,{className:"w-8 h-8 text-white"})}),(0,i.jsx)("div",{className:"absolute inset-0 rounded-2xl border border-white/5"}),(0,i.jsx)("div",{className:"absolute -inset-2 rounded-3xl border border-orange-500/30 animate-spin",style:{animationDuration:"4s"}})]}),(0,i.jsxs)("div",{className:"space-y-3 text-center z-10",children:[(0,i.jsx)("h1",{className:"text-4xl font-black tracking-widest bg-gradient-to-r from-orange-400 via-red-500 to-purple-600 bg-clip-text text-transparent animate-pulse filter drop-shadow-lg",children:"ADISTOW"}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 text-white/40 text-sm font-medium tracking-wide uppercase",children:[(0,i.jsx)("div",{className:"w-2 h-2 rounded-full bg-orange-500 animate-bounce"}),(0,i.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-bounce delay-100"}),(0,i.jsx)("div",{className:"w-2 h-2 rounded-full bg-purple-500 animate-bounce delay-200"}),(0,i.jsx)("span",{children:"Lezzet Y\xfckleniyor"})]})]})]})]})}var C=a(1981),I=a(1250),z=a(1016),P=a(5713),_=a(2707);function useGeofence(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,[a,r]=(0,l.useState)(null),[s,i]=(0,l.useState)(null),[n,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(null),[x,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(!1),checkLocation=()=>{if(!navigator.geolocation){o("Tarayıcınız konum servisini desteklemiyor."),d("BROWSER_NOT_SUPPORTED"),r(!1);return}h(!0),o(null),d(null),navigator.geolocation.getCurrentPosition(a=>{let s={latitude:a.coords.latitude,longitude:a.coords.longitude},l="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname;if(!e||l){r(!0),h(!1);return}let n=(0,_.getDistance)(s,e);i(n),n<=t?(r(!0),o(null),d(null)):(r(!1),o("Restorandan \xe7ok uzaktasınız (".concat(n,"m). Sipariş vermek i\xe7in restoranda olmalısınız.")),d("TOO_FAR")),h(!1)},e=>{h(!1),r(!1),1===e.code?(o("Konum izni reddedildi. Tarayıcı ayarlarından konum iznini a\xe7ın."),d("PERMISSION_DENIED")):2===e.code?(o("Konum servisleri kapalı. L\xfctfen cihazınızın konum ayarlarını a\xe7ın."),d("LOCATION_DISABLED")):(3===e.code?o("Konum alınırken zaman aşımı. Tekrar deneyin."):o("Konum alınamadı. L\xfctfen konum ayarlarınızı kontrol edin."),d("POSITION_UNAVAILABLE"))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},requestPermission=async()=>new Promise(e=>{if(!navigator.geolocation){o("Tarayıcınız konum servisini desteklemiyor."),d("BROWSER_NOT_SUPPORTED"),e(!1);return}navigator.geolocation.getCurrentPosition(()=>{localStorage.setItem("locationPermissionAsked","true"),localStorage.setItem("locationPermissionGranted","true"),checkLocation(),e(!0)},t=>{localStorage.setItem("locationPermissionAsked","true"),localStorage.setItem("locationPermissionGranted","false"),1===t.code?(o("Konum izni reddedildi."),d("PERMISSION_DENIED")):2===t.code&&(o("Konum servisleri kapalı. L\xfctfen cihazınızın konum ayarlarını a\xe7ın."),d("LOCATION_DISABLED")),e(!1)},{enableHighAccuracy:!0,timeout:1e4})}),p="true"===localStorage.getItem("locationPermissionAsked");return(0,l.useEffect)(()=>{checkLocation(),navigator.permissions&&navigator.permissions.query&&navigator.permissions.query({name:"geolocation"}).then(e=>{u(e.state),e.onchange=()=>{u(e.state),checkLocation()}});let e=setInterval(()=>{"granted"===x&&checkLocation()},3e4);return()=>clearInterval(e)},[e]),{isWithinRange:a,distance:s,error:n,errorType:c,isChecking:m,checkLocation,permissionStatus:x,requestPermission,hasAskedPermission:p}}var T=a(994),R=a(6889),O=a(4086),L=a(5813);try{r=(0,T.C6)().length>0?(0,T.Mq)():(0,T.ZF)({apiKey:"AIzaSyB-mPq-8Xy7X_p-l-0X-y-X-p-l-0X-",authDomain:"restoqr-admin-app.firebaseapp.com",projectId:"restoqr-admin-app",storageBucket:"restoqr-admin-app.appspot.com",messagingSenderId:"1026049280142",appId:"1:1026049280142:web:7a8b9c0d1e2f3g4h5i6j7k"}),(0,R.v0)(r),s=(0,O.ad)(r),(0,L.cF)(r)}catch(e){console.error("Firebase initialization failed:",e)}var M=a(3095),Z=a(2894),q=a(2682),B=a(2845),G=a(1271),H=a(5925);function LocationPermissionModal(e){let{isOpen:t,onClose:a,onPermissionGranted:r,onPermissionDenied:s,errorType:n,distance:o}=e,c=(0,g.useTranslations)("Permission"),[x,u]=(0,l.useState)(!1),[m,h]=(0,l.useState)(!1),handleRequestPermission=async()=>{if("PERMISSION_DENIED"===n){h(!0);return}if(u(!0),!navigator.geolocation){H.default.error(c("browserUnsupported")),s(),u(!1);return}try{navigator.geolocation.getCurrentPosition(e=>{localStorage.setItem("locationPermissionAsked","true"),localStorage.setItem("locationPermissionGranted","true"),H.default.success(c("permissionGranted")),u(!1),r(),a()},e=>{u(!1),localStorage.setItem("locationPermissionAsked","true"),localStorage.setItem("locationPermissionGranted","false"),1===e.code?(H.default.error(c("permissionDeniedToast")),h(!0)):2===e.code?H.default.error(c("locationServicesOff")):3===e.code&&H.default.error(c("locationFetchError")),s()},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})}catch(e){console.error("Permission error:",e),H.default.error(c("errorGeneric")),u(!1),s()}},p=(()=>{switch(n){case"LOCATION_DISABLED":return{icon:M.Z,iconColor:"text-orange-500",iconBg:"bg-orange-500/10",iconGlow:"bg-orange-500",title:c("locationDisabledTitle"),description:c("locationDisabledDesc"),actionText:c("understand"),isWarning:!0};case"TOO_FAR":return{icon:Z.Z,iconColor:"text-red-500",iconBg:"bg-red-500/10",iconGlow:"bg-red-500",title:c("tooFarTitle"),description:o?c("tooFarDesc",{distance:o}):c("tooFarDescSimple"),actionText:c("checkAgain"),isWarning:!0};case"PERMISSION_DENIED":return{icon:M.Z,iconColor:"text-red-500",iconBg:"bg-red-500/10",iconGlow:"bg-red-500",title:c("permissionDeniedTitle"),description:c("permissionDeniedDesc"),actionText:m?c("ok"):c("howToAllow"),isWarning:!0};default:return{icon:q.Z,iconColor:"text-[#00cca3]",iconBg:"bg-[#00cca3]/10",iconGlow:"bg-[#00cca3]",title:c("verifyTitle"),description:c("verifyDesc"),actionText:c("allow"),isWarning:!1}}})(),b=p.icon;return(0,i.jsx)(y.M,{children:t&&(0,i.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,i.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"absolute inset-0 bg-black/80 backdrop-blur-md"}),(0,i.jsxs)(d.E.div,{initial:{scale:.8,opacity:0,y:40},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:40},transition:{type:"spring",damping:20},className:"relative z-10 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,i.jsx)("div",{className:"absolute -inset-1 ".concat(p.iconGlow," blur-2xl opacity-20 rounded-2xl")}),(0,i.jsxs)("div",{className:"relative bg-gradient-to-br from-zinc-900 to-black border border-white/10 rounded-2xl p-8 shadow-2xl",children:[(0,i.jsx)("button",{onClick:a,className:"absolute top-4 right-4 w-10 h-10 flex items-center justify-center rounded-full bg-white/5 hover:bg-white/10 transition-all hover:rotate-90 duration-300",children:(0,i.jsx)(F.Z,{className:"w-5 h-5 text-zinc-400"})}),(0,i.jsxs)("div",{className:"w-20 h-20 ".concat(p.iconBg," rounded-2xl flex items-center justify-center mx-auto mb-6 relative group"),children:[(0,i.jsx)("div",{className:"absolute inset-0 ".concat(p.iconGlow," blur-xl opacity-40 animate-pulse")}),(0,i.jsx)(b,{className:"w-10 h-10 ".concat(p.iconColor," relative")})]}),(0,i.jsx)("h2",{className:"text-2xl font-black text-white text-center mb-3 tracking-tight",children:p.title}),(0,i.jsx)("p",{className:"text-zinc-400 text-center mb-8 leading-relaxed text-sm",children:p.description}),m&&"PERMISSION_DENIED"===n&&(0,i.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,i.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:(0,i.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,i.jsx)(B.Z,{className:"w-5 h-5 text-red-400 shrink-0 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-white font-bold text-sm mb-1",children:c("instructions.chromeTitle")}),(0,i.jsxs)("ol",{className:"text-xs text-zinc-300 space-y-1 list-decimal list-inside",children:[(0,i.jsx)("li",{children:c("instructions.chromeStep1")}),(0,i.jsx)("li",{children:c("instructions.chromeStep2")}),(0,i.jsx)("li",{children:c("instructions.chromeStep3")}),(0,i.jsx)("li",{children:c("instructions.chromeStep4")})]})]})]})}),(0,i.jsx)("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-xl p-4",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(G.Z,{className:"w-5 h-5 text-orange-400 shrink-0 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-white font-bold text-sm mb-1",children:c("instructions.mobileTitle")}),(0,i.jsxs)("ol",{className:"text-xs text-zinc-300 space-y-1 list-decimal list-inside",children:[(0,i.jsx)("li",{children:c("instructions.mobileStep1")}),(0,i.jsx)("li",{children:c("instructions.mobileStep2")}),(0,i.jsx)("li",{children:c("instructions.mobileStep3")})]})]})]})}),(0,i.jsx)("div",{className:"text-center pt-2",children:(0,i.jsxs)("div",{className:"text-xs text-zinc-500",children:["⚠️ ",c("instructions.refreshNote")]})})]}),!p.isWarning&&!m&&(0,i.jsx)("div",{className:"space-y-3 mb-8",children:[{icon:D.Z,text:c("safeOrder")},{icon:D.Z,text:c("callWaiter")},{icon:D.Z,text:c("requestBill")}].map((e,t)=>(0,i.jsxs)(d.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl border border-white/5 hover:bg-white/10 transition-all",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-[#00cca3]/20 rounded-full flex items-center justify-center shrink-0",children:(0,i.jsx)(e.icon,{className:"w-4 h-4 text-[#00cca3]"})}),(0,i.jsx)("span",{className:"text-sm text-zinc-300 font-medium",children:e.text})]},t))}),p.isWarning&&"TOO_FAR"===n&&(0,i.jsx)("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl",children:(0,i.jsxs)("p",{className:"text-red-400 text-xs text-center",children:["\uD83D\uDD12 ",c("safetyWarning")]})}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:a,className:"flex-1 px-6 py-3.5 rounded-xl bg-white/5 text-zinc-300 font-bold hover:bg-white/10 transition-all border border-white/10",children:c("close")}),(0,i.jsx)("button",{onClick:handleRequestPermission,disabled:x,className:"flex-1 px-6 py-3.5 rounded-xl font-bold transition-all shadow-lg disabled:opacity-50 ".concat(p.isWarning?"bg-orange-500 hover:bg-orange-600 text-white shadow-orange-500/30":"bg-gradient-to-r from-[#00cca3] to-[#00b894] hover:from-[#00b894] hover:to-[#00cca3] text-black shadow-[#00cca3]/40"),children:x?(0,i.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,i.jsx)(d.E.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),c("checking")]}):p.actionText})]}),(0,i.jsxs)("p",{className:"text-xs text-zinc-600 text-center mt-6 leading-relaxed",children:["\uD83D\uDD12 ",c("privacyNote")]})]})]})]})})}async function triggerNotification(e){let{restaurantId:t,tableId:a,type:r,title:i,body:l}=e;try{let e=(0,O.hJ)(s,"restaurants",t,"notifications");await (0,O.ET)(e,{type:r,tableId:a,title:i,body:l,status:"new",createdAt:(0,O.Bt)(),deleteAt:(()=>{let e=new Date(Date.now()+1296e6);return e.setHours(6,0,0,0),e})(),isRead:!1}),console.log("Notification created in Firestore: ".concat(r," for Table ").concat(a,". Cloud Function will handle FCM."))}catch(e){console.error("Error triggering notification:",e)}}function ServiceButtons(e){let{restaurantId:t,tableId:a,tableName:r,location:n,waiterCallEnabled:o=!0,coalRequestEnabled:c=!1}=e,x=(0,g.useTranslations)("Service"),u=(0,g.useTranslations)("Cart"),{isWithinRange:m,error:h,errorType:p,distance:b,checkLocation:f,hasAskedPermission:v,requestPermission:w}=useGeofence(n),[j,N]=(0,l.useState)(null),[y,F]=(0,l.useState)(!1),[k,A]=(0,l.useState)(null),[D,E]=(0,l.useState)(0),[S,_]=(0,l.useState)(0);(0,l.useEffect)(()=>{let e=setInterval(()=>{let e=Math.max(0,Math.ceil((D-Date.now())/1e3));_(e)},100);return()=>clearInterval(e)},[D]);let handleRequest=async e=>{if(S>0){H.default.error(x("cooldown",{seconds:S}));return}if(!v){A(e),F(!0);return}if(!1===m){H.default.error(h||u("locationErrorDesc"));return}N(e);try{let i=(0,O.JU)(s,"restaurants",t,"tables",a),l="waiter"===e?"Garson \xc7ağırıyor":"coal"===e?"K\xf6z İstiyor":"Hesap İstiyor";await (0,O.r7)(i,{requests:(0,O.vr)({type:e,timestamp:Date.now(),status:"pending",message:l})}),await triggerNotification({restaurantId:t,tableId:a,type:e,title:"".concat(r),body:"".concat(r," ").concat(l)}),E(Date.now()+3e4);let n="";"waiter"===e?n=x("waiterSent"):"coal"===e?n=x("coalSent"):"bill"===e&&(n=x("billSent")),H.default.success(n,{icon:"waiter"===e?"\uD83D\uDECE️":"coal"===e?"\uD83D\uDD25":"\uD83D\uDCB3",style:{background:"#1A1A1A",color:"#FAF7F2",border:"1px solid #D97706"}})}catch(e){console.error("Request error:",e),H.default.error(u("orderError"))}finally{N(null)}},T=!1===m;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(LocationPermissionModal,{isOpen:y,onClose:()=>F(!1),onPermissionGranted:()=>{k&&(handleRequest(k),A(null))},onPermissionDenied:()=>{A(null),H.default.error(x("locationError"))},errorType:p,distance:b}),(0,i.jsxs)("div",{className:"fixed bottom-36 right-6 z-30 flex flex-col gap-4",children:[T&&(0,i.jsxs)(d.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:()=>{v&&"PERMISSION_DENIED"!==p&&"LOCATION_DISABLED"!==p?f():F(!0)},className:"absolute bottom-0 right-20 mb-[-1rem] mr-[-1rem] bg-[#1A1A1A] rounded-2xl border border-red-500/50 p-4 shadow-2xl w-48 text-center",children:[(0,i.jsx)(C.Z,{className:"w-8 h-8 text-red-500 mx-auto mb-2 animate-pulse"}),(0,i.jsx)("div",{className:"text-[#FAF7F2] font-bold text-xs mb-1",children:u("locationError")}),(0,i.jsx)("div",{className:"text-red-400 text-[10px] mb-2",children:u("locationErrorDesc")}),(0,i.jsx)("button",{className:"bg-red-500 text-white text-[10px] font-bold px-3 py-1.5 rounded-full w-full",children:"FIX"})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[o&&(0,i.jsxs)(d.E.button,{onClick:()=>handleRequest("waiter"),disabled:"waiter"===j||S>0||T,whileHover:{scale:S>0||T?1:1.1},whileTap:{scale:.9},className:"w-14 h-14 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 relative group ".concat(S>0||T?"bg-[#1A1A1A] border border-[#FAF7F2]/10 opacity-50 cursor-not-allowed":"bg-[#1A1A1A] border border-[#D97706]/30 hover:border-[#D97706] hover:bg-[#FAF7F2]/5"),children:[(0,i.jsx)("div",{className:"absolute inset-0 rounded-full bg-[#D97706]/5 blur-md opacity-0 group-hover:opacity-100 transition-opacity"}),S>0?(0,i.jsxs)("span",{className:"text-xs font-bold text-[#FAF7F2]",children:[S,"s"]}):(0,i.jsx)(I.Z,{className:"w-6 h-6 text-[#D97706]"})]}),c&&(0,i.jsxs)(d.E.button,{onClick:()=>handleRequest("coal"),disabled:"coal"===j||S>0||T,whileHover:{scale:S>0||T?1:1.1},whileTap:{scale:.9},className:"w-14 h-14 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 relative group ".concat(S>0||T?"bg-[#1A1A1A] border border-[#FAF7F2]/10 opacity-50 cursor-not-allowed":"bg-[#1A1A1A] border border-[#EA580C]/30 hover:border-[#EA580C] hover:bg-[#FAF7F2]/5"),children:[(0,i.jsx)("div",{className:"absolute inset-0 rounded-full bg-[#EA580C]/5 blur-md opacity-0 group-hover:opacity-100 transition-opacity"}),S>0?(0,i.jsxs)("span",{className:"text-xs font-bold text-[#FAF7F2]",children:[S,"s"]}):(0,i.jsx)(z.Z,{className:"w-6 h-6 text-[#EA580C]"})]}),(0,i.jsxs)(d.E.button,{onClick:()=>handleRequest("bill"),disabled:"bill"===j||S>0||T,whileHover:{scale:S>0||T?1:1.1},whileTap:{scale:.9},className:"w-14 h-14 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 relative group ".concat(S>0||T?"bg-[#1A1A1A] border border-[#FAF7F2]/10 opacity-50 cursor-not-allowed":"bg-[#1A1A1A] border border-[#FAF7F2]/20 hover:border-[#FAF7F2]/50 hover:bg-[#FAF7F2]/5"),children:[(0,i.jsx)("div",{className:"absolute inset-0 rounded-full bg-[#FAF7F2]/5 blur-md opacity-0 group-hover:opacity-100 transition-opacity"}),S>0?(0,i.jsxs)("span",{className:"text-xs font-bold text-[#FAF7F2]",children:[S,"s"]}):(0,i.jsx)(P.Z,{className:"w-6 h-6 text-[#FAF7F2]"})]})]})]})]})}var J=a(6712),U=a(8291),W=a(5367);async function trackScan(e){if(e)try{let t=(0,O.JU)(s,"restaurants",e,"analytics","stats");await (0,O.r7)(t,{totalScans:(0,O.nP)(1)}).catch(async e=>{"not-found"===e.code&&await (0,O.pl)(t,{totalScans:1,totalViews:0,totalRevenue:0,popularProduct:"",customizationRate:0,hourlyActivity:Array(24).fill(0).map((e,t)=>({time:"".concat(t,":00"),scans:0,views:0}))},{merge:!0})})}catch(e){console.error("Failed to track scan:",e)}}async function trackView(e){if(e)try{let t=(0,O.JU)(s,"restaurants",e,"analytics","stats");await (0,O.r7)(t,{totalViews:(0,O.nP)(1)}).catch(async e=>{"not-found"===e.code&&await (0,O.pl)(t,{totalScans:0,totalViews:1,totalRevenue:0,popularProduct:"",customizationRate:0,hourlyActivity:Array(24).fill(0).map((e,t)=>({time:"".concat(t,":00"),scans:0,views:0}))},{merge:!0})})}catch(e){console.error("Failed to track view:",e)}}async function trackRevenue(e,t){if(e&&t)try{let a=(0,O.JU)(s,"restaurants",e,"analytics","stats");await (0,O.r7)(a,{totalRevenue:(0,O.nP)(t)}).catch(async e=>{"not-found"===e.code&&await (0,O.pl)(a,{totalScans:0,totalViews:0,totalRevenue:t,popularProduct:"",customizationRate:0,hourlyActivity:Array(24).fill(0).map((e,t)=>({time:"".concat(t,":00"),scans:0,views:0}))},{merge:!0})})}catch(e){console.error("Failed to track revenue:",e)}}function CartButton(e){let{restaurantId:t,tableId:a,tableName:r,location:n,onOrderSuccess:o}=e,c=(0,g.useTranslations)("Cart"),{itemCount:x,total:u,items:m,removeFromCart:p,updateQuantity:b,clearCart:f,cartNote:v,setCartNote:w}=(0,E.useCart)(),{isWithinRange:N,error:k,errorType:D,distance:S,checkLocation:C,hasAskedPermission:I,requestPermission:z}=useGeofence(n),[P,_]=(0,l.useState)(!1),[T,R]=(0,l.useState)(!1),[L,M]=(0,l.useState)(!1),handleCheckout=async()=>{if(!I){M(!0);return}if(!N){H.default.error(k||c("locationErrorDesc"),{style:{background:"#1A1A1A",color:"#FAF7F2",border:"1px solid #dc2626"}}),M(!0);return}if(0!==m.length){R(!0);try{let e=(0,O.hJ)(s,"restaurants",t,"orders"),i=(0,O.hJ)(s,"restaurants",t,"tables"),l=(0,O.JU)(i,a),n={tableId:a,tableName:r,items:m.map(e=>({id:e.productId,name:e.name,price:e.price,quantity:e.quantity,notes:e.note||"",extras:e.options||[]})),status:"pending",total:u,timestamp:O.EK.now(),deleteAt:(()=>{let e=new Date(Date.now()+1296e6);return e.setHours(6,0,0,0),e})(),note:v||""},d=await (0,O.ET)(e,n);await (0,O.r7)(l,{activeOrders:(0,O.vr)(d.id),orders:(0,O.vr)(...n.items),totalAmount:(0,O.nP)(u),status:"ordering",lastOrderTime:O.EK.now()}),await triggerNotification({restaurantId:t,tableId:a,type:"order",title:"".concat(r),body:"".concat(r,": Yeni Sipariş (₺").concat(u,")")}),await trackRevenue(t,u),f(),_(!1),H.default.success(c("orderSent"),{icon:"\uD83E\uDD42",style:{background:"#1A1A1A",color:"#FAF7F2",border:"1px solid #D97706"}}),o&&setTimeout(o,1500)}catch(e){console.error("Checkout error:",e),H.default.error(c("orderError"))}finally{R(!1)}}};return 0===x?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(LocationPermissionModal,{isOpen:L,onClose:()=>M(!1),onPermissionGranted:()=>{M(!1),C(),setTimeout(()=>{N&&handleCheckout()},500)},onPermissionDenied:()=>{M(!1),H.default.error(c("permissionDenied"))},errorType:D,distance:S}),(0,i.jsxs)(d.E.button,{initial:{scale:0,y:100},animate:{scale:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.95},onClick:()=>_(!0),className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-[#1A1A1A]/95 border border-[#D97706]/30 text-[#FAF7F2] px-6 py-4 rounded-2xl shadow-[0_10px_40px_rgba(0,0,0,0.6)] flex items-center gap-5 w-[92%] max-w-sm justify-between backdrop-blur-xl ring-1 ring-white/5",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"bg-[#D97706]/20 p-2.5 rounded-xl border border-[#D97706]/30 relative",children:[(0,i.jsx)(J.Z,{className:"w-6 h-6 text-[#D97706]"}),(0,i.jsx)("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-[#D97706] rounded-full animate-pulse shadow-[0_0_10px_#D97706]"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-start leading-none gap-1",children:[(0,i.jsx)("span",{className:"text-[10px] uppercase font-bold tracking-[0.2em] text-[#D97706]",children:c("title")}),(0,i.jsxs)("span",{className:"font-serif font-bold text-lg",children:[x," ",c("items")]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4 pl-5 border-l border-[#FAF7F2]/10 text-right",children:[(0,i.jsxs)("div",{className:"flex flex-col items-end leading-none gap-1",children:[(0,i.jsx)("span",{className:"text-[10px] uppercase font-bold tracking-[0.2em] text-[#FAF7F2]/50",children:c("total")}),(0,i.jsxs)("span",{className:"font-serif font-black text-xl text-[#D97706] tracking-tight",children:["₺",u]})]}),(0,i.jsx)(U.Z,{className:"w-5 h-5 text-[#FAF7F2]/60"})]})]}),(0,i.jsx)(y.M,{children:P&&(0,i.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center",children:[(0,i.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>_(!1),className:"absolute inset-0 bg-black/80 backdrop-blur-md"}),(0,i.jsxs)(d.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"bg-[#1A1A1A] border-t border-[#FAF7F2]/10 w-full max-w-lg rounded-t-[2.5rem] sm:rounded-3xl p-6 relative z-10 max-h-[92vh] flex flex-col shadow-2xl",children:[(0,i.jsx)("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] mix-blend-overlay rounded-t-[2.5rem]"}),(0,i.jsx)("div",{className:"w-16 h-1 bg-[#FAF7F2]/10 rounded-full mx-auto mb-8 sm:hidden"}),(0,i.jsxs)("div",{className:"flex justify-between items-center mb-8 relative z-10",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-3xl font-serif font-black text-[#FAF7F2] tracking-tight",children:c("title")}),(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,i.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-[#D97706] animate-pulse"}),(0,i.jsx)("p",{className:"text-xs text-[#D97706] font-bold uppercase tracking-[0.2em]",children:r})]})]}),(0,i.jsx)("button",{onClick:()=>_(!1),className:"w-10 h-10 flex items-center justify-center bg-[#FAF7F2]/5 hover:bg-[#FAF7F2]/10 border border-[#FAF7F2]/5 rounded-full transition-colors",children:(0,i.jsx)(F.Z,{className:"w-5 h-5 text-[#FAF7F2]/80"})})]}),(0,i.jsx)("div",{className:"flex-1 overflow-y-auto space-y-4 mb-6 custom-scroll px-1 relative z-10",children:m.map(e=>(0,i.jsx)(d.E.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,scale:.95},className:"group p-4 rounded-2xl bg-[#FAF7F2]/5 border border-[#FAF7F2]/5 hover:border-[#D97706]/30 hover:bg-[#FAF7F2]/[0.08] transition-all relative overflow-hidden",children:(0,i.jsxs)("div",{className:"flex gap-4",children:[e.image&&(0,i.jsx)("div",{className:"w-20 h-20 rounded-xl overflow-hidden bg-black/50 shrink-0 border border-[#FAF7F2]/10",children:(0,i.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover grayscale-[20%] group-hover:grayscale-0 transition-all duration-500"})}),(0,i.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,i.jsx)("h4",{className:"font-serif font-bold text-lg text-[#FAF7F2] leading-tight",children:e.name}),(0,i.jsx)("button",{onClick:()=>p(e.id),className:"p-1.5 rounded-lg text-[#FAF7F2]/40 hover:text-red-400 hover:bg-red-500/10 transition-all opacity-0 group-hover:opacity-100",children:(0,i.jsx)(W.Z,{className:"w-4 h-4"})})]}),e.options&&e.options.length>0&&(0,i.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-2",children:e.options.map((e,t)=>(0,i.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide bg-[#D97706]/10 text-[#D97706] border border-[#D97706]/20",children:e},t))}),e.note&&(0,i.jsxs)("p",{className:"text-[11px] font-medium text-[#FAF7F2]/60 italic mt-2 border-l-2 border-[#D97706]/50 pl-2",children:['"',e.note,'"']})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,i.jsxs)("div",{className:"flex items-center bg-[#1A1A1A] rounded-lg border border-[#FAF7F2]/10 p-0.5",children:[(0,i.jsx)("button",{onClick:()=>b(e.id,-1),className:"w-7 h-7 rounded-md hover:bg-[#FAF7F2]/10 flex items-center justify-center transition-colors text-[#FAF7F2]/60",children:(0,i.jsx)(A.Z,{className:"w-3.5 h-3.5"})}),(0,i.jsx)("span",{className:"font-medium text-[#FAF7F2] w-6 text-center text-sm",children:e.quantity}),(0,i.jsx)("button",{onClick:()=>b(e.id,1),className:"w-7 h-7 rounded-md hover:bg-[#FAF7F2]/10 flex items-center justify-center transition-colors text-[#D97706]",children:(0,i.jsx)(j.Z,{className:"w-3.5 h-3.5"})})]}),(0,i.jsxs)("span",{className:"font-serif font-bold text-lg text-[#FAF7F2]",children:["₺",(e.price*e.quantity).toFixed(0)]})]})]})]})},e.id))}),(0,i.jsxs)("div",{className:"pt-4 border-t border-[#FAF7F2]/10 relative z-10",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,i.jsx)("span",{className:"text-xs font-bold text-[#D97706] uppercase tracking-[0.2em]",children:c("note")}),(0,i.jsx)("div",{className:"h-px flex-1 bg-[#D97706]/20"})]}),(0,i.jsx)("textarea",{value:v,onChange:e=>{e.target.value.length<=200&&w(e.target.value)},placeholder:c("notePlaceholder"),className:"w-full px-4 py-3 bg-[#FAF7F2]/5 border border-[#FAF7F2]/10 rounded-xl text-sm text-[#FAF7F2] placeholder:text-[#FAF7F2]/30 resize-none focus:ring-1 focus:ring-[#D97706]/50 focus:border-[#D97706]/50 outline-none transition-all font-sans",rows:2}),(0,i.jsx)("div",{className:"flex justify-end mt-1 px-1",children:(0,i.jsxs)("span",{className:"text-[10px] text-[#FAF7F2]/30 font-medium",children:[v.length,"/200"]})})]}),!N&&(0,i.jsxs)(d.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"mt-4 p-4 bg-red-900/20 border border-red-500/30 rounded-xl flex items-center gap-3 relative z-10",children:[(0,i.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center shrink-0",children:(0,i.jsx)(h.Z,{className:"w-5 h-5 text-red-500"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs font-bold text-red-400 uppercase tracking-widest",children:c("locationError")}),(0,i.jsx)("p",{className:"text-xs text-red-300/60 leading-tight mt-0.5",children:c("locationErrorDesc")})]})]}),(0,i.jsxs)("div",{className:"pt-6 border-t border-[#FAF7F2]/10 mt-4 relative z-10",children:[(0,i.jsxs)("div",{className:"flex justify-between items-end mb-6 px-1",children:[(0,i.jsxs)("div",{className:"flex flex-col leading-none",children:[(0,i.jsx)("span",{className:"text-xs font-bold text-[#FAF7F2]/40 uppercase tracking-[0.2em] mb-2",children:c("total")}),(0,i.jsxs)("span",{className:"text-4xl font-serif font-black text-[#D97706] tracking-tight",children:["₺",u]})]}),(0,i.jsx)("div",{className:"text-right leading-none pb-1",children:(0,i.jsxs)("span",{className:"text-sm font-medium text-[#FAF7F2]/60",children:[x," ",c("items")]})})]}),(0,i.jsx)("button",{onClick:handleCheckout,disabled:T||!N,className:"w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-3 shadow-lg transition-all active:scale-[0.98] ".concat(N?"bg-gradient-to-r from-[#D97706] to-amber-600 text-white shadow-amber-900/20 hover:brightness-110":"bg-[#FAF7F2]/5 text-[#FAF7F2]/20 cursor-not-allowed border border-[#FAF7F2]/5"),children:T?(0,i.jsx)("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"tracking-wide font-sans",children:c("checkout")}),(0,i.jsx)(U.Z,{className:"w-5 h-5"})]})})]})]})]})})]})}var K=a(7810),V=a(2882),Y=a(8034);function getDeviceId(){let e="restoqr_device_id",t=localStorage.getItem(e);return t||(t="device_"+Math.random().toString(36).substr(2,9)+"_"+Date.now().toString(36),localStorage.setItem(e,t)),t}let X=[{label:"\xdczg\xfcn",emoji:"\uD83D\uDE14",color:"#EF4444"},{label:"Eh İşte",emoji:"\uD83D\uDE10",color:"#F97316"},{label:"İyi",emoji:"\uD83D\uDE42",color:"#EAB308"},{label:"Harika",emoji:"\uD83D\uDE04",color:"#84CC16"},{label:"M\xfckemmel!",emoji:"\uD83E\uDD29",color:"#22C55E"}];function RatingModal(e){let{isOpen:t,onClose:a,restaurantId:r,restaurantName:s}=e,n=(0,g.useTranslations)("Rating"),[o,c]=(0,l.useState)(0),[x,u]=(0,l.useState)(0),[h,p]=(0,l.useState)(""),[b,f]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{t&&(c(0),p(""),w(!1))},[t]);let handleSubmit=async()=>{if(0===o)return;f(!0);let e=getDeviceId();try{let t=await fetch("/api/review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({restaurantId:r,rating:o,comment:h,deviceId:e,userName:"Misafir"})}),s=await t.json();if(t.ok)w(!0),(0,Y.Z)({particleCount:150,spread:70,origin:{y:.6},colors:["#D97706","#FAF7F2","#065F46"]}),H.default.success(n("success"),{icon:"\uD83C\uDF1F",style:{background:"#1A1A1A",color:"#FAF7F2",border:"1px solid #D97706"}}),setTimeout(a,3e3);else if("ALREADY_RATED"===s.error)H.default.error(n("alreadyRated"),{icon:"\uD83D\uDC6E",style:{background:"#1A1A1A",color:"#FAF7F2",border:"1px solid #dc2626"}}),a();else throw Error(s.error)}catch(e){console.error("Rating error:",e),H.default.error(n("error"))}finally{f(!1)}},j=(x||o)>0?X[(x||o)-1]:null;return(0,i.jsx)(y.M,{children:t&&(0,i.jsxs)("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4 sm:p-6 overflow-hidden",children:[(0,i.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"absolute inset-0 bg-black/95 backdrop-blur-2xl"}),(0,i.jsxs)(d.E.div,{initial:{scale:.9,opacity:0,y:40},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:40},transition:{type:"spring",stiffness:300,damping:25},className:"relative w-full max-w-lg bg-[#0A0A0A] border border-white/5 rounded-[2.5rem] shadow-[0_0_100px_rgba(0,0,0,0.5)] overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute top-0 left-1/4 right-1/4 h-[1px] bg-gradient-to-r from-transparent via-amber-500/50 to-transparent"}),(0,i.jsx)("div",{className:"relative z-10 p-8 sm:p-12",children:(0,i.jsx)(y.M,{mode:"wait",children:v?(0,i.jsxs)(d.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"py-12 flex flex-col items-center text-center",children:[(0,i.jsx)("div",{className:"w-24 h-24 bg-amber-500 rounded-full flex items-center justify-center mb-8 shadow-[0_0_50px_rgba(245,158,11,0.5)]",children:(0,i.jsx)(D.Z,{className:"w-12 h-12 text-black stroke-[3]"})}),(0,i.jsx)("h2",{className:"text-3xl font-serif font-medium text-white mb-4",children:"Teşekk\xfcr Ederiz"}),(0,i.jsx)("p",{className:"text-zinc-500 max-w-[250px] leading-relaxed",children:"Geri bildiriminiz başarıyla iletildi. Deneyiminizi paylaştığınız i\xe7in teşekk\xfcrler."})]},"success"):(0,i.jsxs)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.9},className:"flex flex-col items-center text-center",children:[(0,i.jsx)("button",{onClick:a,className:"absolute top-6 right-6 p-2 rounded-full hover:bg-white/5 text-zinc-500 hover:text-white transition-colors",children:(0,i.jsx)(F.Z,{className:"w-6 h-6"})}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-amber-500/10 border border-amber-500/20 text-amber-500 text-[10px] uppercase tracking-widest font-bold mb-4",children:[(0,i.jsx)(K.Z,{className:"w-3 h-3"})," Değerlendirme"]}),(0,i.jsx)("h2",{className:"text-3xl sm:text-4xl font-serif font-medium text-white mb-2 leading-tight",children:n("title")}),(0,i.jsx)("p",{className:"text-zinc-500 text-sm",children:s})]}),(0,i.jsx)("div",{className:"h-24 flex flex-col items-center justify-center mb-4",children:(0,i.jsx)(y.M,{mode:"wait",children:j?(0,i.jsxs)(d.E.div,{initial:{y:10,opacity:0,scale:.8},animate:{y:0,opacity:1,scale:1},exit:{y:-10,opacity:0,scale:.8},className:"flex flex-col items-center",children:[(0,i.jsx)("span",{className:"text-6xl mb-2 drop-shadow-[0_0_20px_rgba(255,255,255,0.2)]",children:j.emoji}),(0,i.jsx)("span",{className:"text-sm font-bold tracking-widest uppercase italic",style:{color:j.color},children:j.label})]},j.label):(0,i.jsx)(d.E.div,{initial:{opacity:.2},animate:{opacity:.3},className:"text-6xl grayscale filter",children:"\uD83D\uDE36"})})}),(0,i.jsx)("div",{className:"flex justify-center gap-3 mb-10 bg-white/[0.02] p-4 rounded-3xl border border-white/[0.05]",children:[1,2,3,4,5].map(e=>(0,i.jsx)("button",{onMouseEnter:()=>u(e),onMouseLeave:()=>u(0),onClick:()=>c(e),className:"relative focus:outline-none transition-transform active:scale-95 p-1",children:(0,i.jsx)(m.Z,{className:"w-10 h-10 transition-all duration-300 ".concat(e<=(x||o)?"fill-amber-500 text-amber-500 drop-shadow-[0_0_15px_rgba(245,158,11,0.5)]":"text-zinc-800 hover:text-zinc-700")})},e))}),(0,i.jsxs)("div",{className:"w-full relative",children:[(0,i.jsx)("div",{className:"absolute top-4 left-4 text-amber-500/30",children:(0,i.jsx)(V.Z,{className:"w-4 h-4"})}),(0,i.jsx)("textarea",{value:h,onChange:e=>p(e.target.value),placeholder:n("placeholder"),className:"w-full h-32 bg-white/[0.03] border border-white/10 rounded-3xl p-5 pl-12 text-white placeholder-zinc-700 text-sm resize-none focus:border-amber-500/40 focus:bg-white/[0.05] outline-none transition-all font-sans"})]}),(0,i.jsx)("button",{onClick:handleSubmit,disabled:0===o||b,className:"w-full mt-8 py-5 rounded-[1.5rem] font-black text-sm tracking-[0.2em] uppercase transition-all relative overflow-hidden group ".concat(o>0&&!b?"bg-amber-500 text-black hover:bg-amber-400 hover:scale-[1.02] shadow-[0_20px_40px_-10px_rgba(245,158,11,0.3)]":"bg-zinc-900 text-zinc-700 cursor-not-allowed border border-white/5"),children:b?(0,i.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,i.jsx)("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin"}),(0,i.jsx)("span",{children:"G\xd6NDERİLİYOR"})]}):(0,i.jsx)("span",{children:n("submit")})})]},"form")})}),(0,i.jsx)("div",{className:"absolute inset-0 opacity-20 pointer-events-none mix-blend-overlay",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/carbon-fibre.png")'}})]})]})})}function MenuPageClient(e){var t,a,r,n;let{params:o}=e,[c,d]=(0,l.useState)(null),[x,u]=(0,l.useState)([]),[m,h]=(0,l.useState)(!0),[p,b]=(0,l.useState)(null),[g,f]=(0,l.useState)(null),[v,w]=(0,l.useState)(!1),[j,N]=(0,l.useState)(!1),[y,F]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{let e=o.slug;if(!e)return;h(!0);let t=null,a=[],r=[],i={waiterCallEnabled:!0,coalRequestEnabled:!1,ratingSystemEnabled:!0},updateMenuState=()=>{if(!t)return;let e=a.map((e,t)=>{let a=r.filter(a=>String(a.categoryId)===String(e.id)||a.category===e.id||!a.categoryId&&0===t);return{...e,items:a}});d({restaurant:t,categories:e,settings:i}),h(!1)},startListeners=e=>{let t=(0,O.cf)((0,O.hJ)(s,"restaurants",e,"categories"),e=>{a=e.docs.map(e=>({id:e.id,...e.data()})),updateMenuState()}),l=(0,O.cf)((0,O.hJ)(s,"restaurants",e,"products"),e=>{r=e.docs.map(e=>{let t=e.data(),a=Number(t.price||t.basePrice||0);return{id:e.id,...t,price:a,basePrice:a,ingredients:t.ingredients||[],extras:t.extras||[]}}).filter(e=>!1!==e.isActive),updateMenuState()}),n=(0,O.cf)((0,O.JU)(s,"restaurants",e,"settings","general"),e=>{e.exists()&&(i={...i,...e.data()},updateMenuState())}),o=(0,O.cf)((0,O.hJ)(s,"restaurants",e,"tables"),e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));u(t)});return()=>{t(),l(),n(),o()}},l=[],n=(0,O.cf)((0,O.JU)(s,"restaurants",e),async a=>{if(a.exists()){if(t={...a.data(),id:a.id},l.length<=1){let e=startListeners(a.id);l.push(e)}updateMenuState()}else try{let a=(0,O.IO)((0,O.hJ)(s,"restaurants"),(0,O.ar)("slug","==",e),(0,O.b9)(1)),r=await (0,O.PL)(a);if(r.empty)b("restaurantNotFound"),h(!1);else{let e=r.docs[0];t={...e.data(),id:e.id};let a=startListeners(e.id);l.push(a),updateMenuState()}}catch(e){console.error("Slug lookup error:",e),b("restaurantNotFound"),h(!1)}});return l.push(n),()=>{l.forEach(e=>e&&"function"==typeof e&&e())}},[o.slug]),(0,l.useEffect)(()=>{o.slug&&(trackScan(o.slug),trackView(o.slug))},[o.slug]),m)return(0,i.jsx)("div",{className:"min-h-screen bg-transparent flex items-center justify-center",children:(0,i.jsx)(LoadingSpinner,{})});if(p||!c)return(0,i.jsx)("div",{className:"min-h-screen bg-transparent flex items-center justify-center",children:(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Restoran Bulunamadı"})})});let k=(()=>{if(o.tableId)return o.tableId;if(o.table)return o.table;let e=new URLSearchParams(window.location.search);if(e.get("table"))return e.get("table");let t=window.location.pathname.split("/").filter(Boolean);if(t.length>=3&&t.includes("menu")){let e=t.indexOf("menu");if(t[e+2])return t[e+2]}return"1"})(),A=x.find(e=>{var t;return e.qrCodeId&&e.qrCodeId===k||(null===(t=e.id)||void 0===t?void 0:t.toString())===k.toString()||e.id===k}),D=A&&(null===(t=A.id)||void 0===t?void 0:t.toString())||k,E=A?A.name:k?"Masa ".concat(k):void 0;return(0,i.jsxs)("div",{className:"min-h-screen bg-transparent text-white relative pb-32",children:[(0,i.jsx)(MenuHeader,{restaurant:c.restaurant,tableNumber:E,onRatingClick:()=>N(!0),ratingSystemEnabled:null===(a=c.settings)||void 0===a?void 0:a.ratingSystemEnabled}),(0,i.jsx)(ServiceButtons,{restaurantId:c.restaurant.id||c.restaurant.uid,tableId:D,tableName:E,location:c.restaurant.coordinates,waiterCallEnabled:null===(r=c.settings)||void 0===r?void 0:r.waiterCallEnabled,coalRequestEnabled:null===(n=c.settings)||void 0===n?void 0:n.coalRequestEnabled}),(0,i.jsx)(CategoryTabs,{categories:c.categories,onCategoryChange:e=>{F(!0)}}),(0,i.jsx)(ProductGrid,{categories:c.categories,onProductClick:e=>{f(e),w(!0)},isListView:y}),(0,i.jsx)(CartButton,{restaurantId:c.restaurant.id||c.restaurant.uid,tableId:D,tableName:E,location:c.restaurant.coordinates,onOrderSuccess:()=>{var e;(null===(e=c.settings)||void 0===e?void 0:e.ratingSystemEnabled)!==!1&&N(!0)}}),(0,i.jsx)(ProductCustomizer,{product:g,isOpen:v,onClose:()=>w(!1),locale:o.locale}),(0,i.jsx)(RatingModal,{isOpen:j,onClose:()=>N(!1),restaurantId:c.restaurant.id,restaurantName:c.restaurant.name})]})}function HomePage(e){let{params:t}=e,a=(0,n.useRouter)();(0,n.useSearchParams)();let[r,s]=(0,l.useState)(!1),[x,u]=(0,l.useState)(""),[m,h]=(0,l.useState)(!1),p=(0,l.useMemo)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("p");if(!t)return null;let a=decodeURIComponent(t),r=a.split("/").filter(Boolean),s=r.filter(e=>!["tr","en","menu"].includes(e)),i=s[0],l=s[1]||"";return i?{slug:i,table:l}:null},[]);return((0,l.useEffect)(()=>{if(s(!0),p){let e="localhost"!==window.location.hostname,a="/".concat(t.locale,"/menu/").concat(p.slug,"/").concat(p.table?p.table+"/":""),r=window.location.origin+(e?"/AdistowLite":"")+a+window.location.hash;window.history.replaceState(null,"",r)}},[p,t.locale]),p)?(0,i.jsx)(MenuPageClient,{params:{locale:t.locale,slug:p.slug,table:p.table}}):r?(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-[#0A0A0A] to-black flex flex-col items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"absolute top-6 right-6",children:(0,i.jsxs)("button",{onClick:()=>{let e="tr"===t.locale?"en":"tr";a.push("/".concat(e))},className:"group flex items-center gap-2 px-4 py-2.5 rounded-2xl bg-white/5 border border-white/10 hover:border-emerald-500/50 hover:bg-white/10 transition-all backdrop-blur-md",children:[(0,i.jsx)(o.Z,{className:"w-4 h-4 text-emerald-500 group-hover:rotate-12 transition-transform"}),(0,i.jsx)("span",{className:"text-sm font-bold text-white/90",children:"tr"===t.locale?"EN":"TR"})]})}),(0,i.jsxs)(d.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10",children:[(0,i.jsxs)("div",{className:"text-center mb-10",children:[(0,i.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-emerald-500 rounded-[2rem] mb-6 shadow-[0_0_50px_rgba(16,185,129,0.4)]",children:(0,i.jsx)(c.Z,{className:"w-12 h-12 text-white"})}),(0,i.jsx)("h1",{className:"text-4xl font-black text-white mb-3 tracking-tighter italic",children:"RestQR"}),(0,i.jsx)("p",{className:"text-gray-400 font-medium",children:"tr"===t.locale?"Modern Men\xfc \xc7\xf6z\xfcm\xfc":"Modern Menu Solution"})]}),(0,i.jsxs)("div",{className:"bg-white/[0.03] backdrop-blur-2xl rounded-[3rem] p-10 border border-white/10 shadow-2xl relative overflow-hidden group",children:[(0,i.jsx)("h2",{className:"text-xl font-black text-white mb-8 text-center uppercase tracking-widest text-emerald-500",children:"tr"===t.locale?"Giriş Yap":"Entry"}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x.trim()&&(h(!0),a.push("/".concat(t.locale,"/?p=").concat(encodeURIComponent("/menu/".concat(x,"/")))))},className:"space-y-6 relative z-10",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{className:"block text-[10px] font-black text-white/40 uppercase tracking-[0.2em] ml-2",children:"tr"===t.locale?"Restoran Kodu":"Restaurant Code"}),(0,i.jsx)("input",{type:"text",value:x,onChange:e=>u(e.target.value),placeholder:"tr"===t.locale?"\xf6rn: demo-restaurant":"e.g. demo-restaurant",className:"w-full px-8 py-5 bg-black/50 border border-white/5 rounded-3xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-white outline-none transition-all font-bold text-lg",required:!0})]}),(0,i.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-emerald-500 hover:bg-emerald-600 text-white font-black py-5 px-8 rounded-3xl flex items-center justify-center gap-4 transition-all",children:m?(0,i.jsx)("div",{className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin"}):(0,i.jsx)("span",{children:"DEVAM ET"})})]})]})]})]}):(0,i.jsx)("div",{className:"min-h-screen bg-[#0A0A0A] flex flex-col items-center justify-center",children:(0,i.jsx)("div",{className:"w-8 h-8 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin"})})}},7087:function(e,t,a){"use strict";a.r(t),a.d(t,{CartProvider:function(){return CartProvider},useCart:function(){return useCart}});var r=a(7437),s=a(2265);let i=(0,s.createContext)(void 0);function CartProvider(e){let{children:t}=e,[a,l]=(0,s.useState)([]),[n,o]=(0,s.useState)("");(0,s.useEffect)(()=>{let e=localStorage.getItem("cart"),t=localStorage.getItem("cartNote");if(e)try{l(JSON.parse(e))}catch(e){console.error("Failed to parse cart",e)}t&&o(t)},[]),(0,s.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(a))},[a]),(0,s.useEffect)(()=>{localStorage.setItem("cartNote",n)},[n]);let c=a.reduce((e,t)=>e+t.price*t.quantity,0),d=a.reduce((e,t)=>e+t.quantity,0);return(0,r.jsx)(i.Provider,{value:{items:a,addToCart:e=>{l(t=>{let a=t.find(t=>{var a,r;return t.productId===e.productId&&JSON.stringify(null===(a=t.options)||void 0===a?void 0:a.sort())===JSON.stringify(null===(r=e.options)||void 0===r?void 0:r.sort())&&(t.note||"")===(e.note||"")});if(a)return t.map(e=>e.id===a.id?{...e,quantity:e.quantity+1}:e);let r="".concat(e.productId,"-").concat(Date.now(),"-").concat(Math.random());return[...t,{...e,id:r}]})},removeFromCart:e=>{l(t=>t.filter(t=>t.id!==e))},updateQuantity:(e,t)=>{l(a=>a.map(a=>{if(a.id===e){let e=Math.max(0,a.quantity+t);return{...a,quantity:e}}return a}).filter(e=>e.quantity>0))},clearCart:()=>{l([]),o("")},total:c,itemCount:d,cartNote:n,setCartNote:o},children:t})}function useCart(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}},function(e){e.O(0,[609,483,535,968,971,184,744],function(){return e(e.s=5031)}),_N_E=e.O()}]);